/*  $Revision: 1.31 $Date: 2016/04/13 12:34:32 $  SevenOne Media Ad Integration for www.sport1.de*/window.setBackground = function(style){  document.getElementById('s1-main-menu').style.background  = 'none';  for(var elements = document.getElementsByClassName('s1-ads-outer'), i = elements.length; i--;) {    elements[i].style.background = 'none';  }  if(style.background) {    document.body.style.background = style.background;  }  if(style.backgroundColor) {    document.body.style.backgroundColor = style.backgroundColor;  }  if(style.backgroundImage) {    document.body.style.backgroundImage = style.backgroundImage;  }  if(style.backgroundRepeat) {    document.body.style.backgroundRepeat = style.backgroundRepeat;  }  if(style.backgroundPosition) {    document.body.style.backgroundPosition = style.backgroundPosition;  }  if(style.backgroundAttachment) {    document.body.style.backgroundAttachment = style.backgroundAttachment;  }};window.myAd = {  revision: '$Revision: 1.31 $Date: 2016/04/13 12:34:32 $',  soi_site_script:  'sport1.js',  container_prefix: 'ad-',  admessage: 'Der Spot dauert noch xx Sekunden ...',  loaded:     {},  delivered:  {},  finished:   {},  messages:   [],  // ad reload  original_config: {},  update_config:   {},  last_reload:     0,  interval: 7 * 1000, // pre-defined value must be <= minimum of interval_minimums  interval_minimums: {    liveticker: 15 * 1000,    gallery:     7 * 1000,    other:      10 * 1000  },  lookup: {    popup1:       'SOI_PU1',    fullbanner2:  'SOI_FB2',    skyscraper1:  'SOI_SC1',    skyscraper2:  'SOI_SC2',    rectangle1:   'SOI_RT1',    promo1:       'SOI_PB1',    promo2:       'SOI_PB2',    promo3:       'SOI_PB3',    promo4:       'SOI_PB4',    promo5:       'SOI_PB5', // 300 x 250 wettbox    ateaser:      'SOI_TSA', // 300 x 120 sponsor label    performance1: 'SOI_PF1', // 1040 x 90 presenter top, 1000 x 200 desktop ticker scoreboard ad    performance2: 'SOI_PF2', // 660 x  90 presenter bottom    performance3: 'SOI_PF3', // 728 x  90 performance bottom    performance4: 'SOI_PF4', // 660 x 132 desktop ticker post ad    performance5: 'SOI_PF5', // 300 x  60 | 320 x 180 mew ticker scoreboard ad | 320 x 120 mew sponsor    performance6: 'SOI_PF6', // 300 x  60 | 320 x 64 mew ticker post ad    mlayer1:      'SOI_ML1', // mew layer    mbanner1:     'SOI_MB1', // 320 x 50    mbanner2:     'SOI_MB2', // 320 x 50    inread1:      'SOI_IR1', // inread    minread1:     'SOI_MIR1' // mobile inread  },  loadScript: function(which) {    if (!window.SOI_WERBUNG) return;    if (this.loaded[which]) return;    var src = '';    switch (which) {      case 'global':        src = '/globalV6.js';        break;      case 'site':        if (!this.inIFrame) this.storeOriginalConfig();        this.excludeAds();        if (this.soi_site_script) src = '/Sites/' + this.soi_site_script;        break;    }    if (!src) return;    var server = 'http://ad.71i.de/global_js';    this.loaded[which] = true;    document.write('<script src="' + server + src + '"><\/script>');  },  storeOriginalConfig: function() {    try {      if (!this.original_config) this.original_config = {};      for (var i = 0; i < this.lookup.length; i++) {        var varname = this.lookup[i];        if (window[varname]) this.original_config[varname] = window[varname];      }      for (var i = 1; i < 7; i++) {        var varname = 'SOI_SUB' + (i == 1 ? '' : i) + 'SITE'        this.original_config[varname] = window[varname] || '';      }      if (!window.SOI_KEYWORDS) window.SOI_KEYWORDS = '';      var storables = ['SOI_CONTENT', 'SOI_KEYWORDS',        'SOI_VP', 'SOI_VA1', 'SOI_VA2', 'SOI_VA3', 'SOI_VA4', 'SOI_VA5', 'SOI_LPY'];      for (var i = 0; i < storables.length; i++) {        this.original_config[storables[i]] = window[storables[i]];      }    }    catch(e) {}  },  restoreOriginalConfig: function() {    if (!this.original_config) return;    for (var k in this.original_config) {      window[k] = this.original_config[k];    }    this.excludeAds();  },  getClientWidth: function() {    return window.innerWidth // includes scrollbar - identical with media query condition      || (document.documentElement ?            document.documentElement.clientWidth // html element          : document.body ?              document.body.clientWidth || document.body.offsetWidth // body            : 0); // not available  },  getContentWidth: function() {    var ads_outer = document.getElementById('ads-outer');    return ads_outer ? ads_outer.offsetWidth : 0;  },  excludeAds: function() {    if (this.inIFrame) return;    try {      // high default in case of non-retrievable widths      var content_width = this.getContentWidth() || 10000;      var client_width  = this.getClientWidth() || 10000;      if (client_width < 1240) window.SOI_SB = false; // (1240 - 1040 - 16 + 80) / 2 - 10 = 124      if (client_width < 1220) window.SOI_FP = false; // (1220 - 1040 - 16) / 2 = 82      if (client_width < 1170)  window.SOI_SC1 = window.SOI_WP = false; // 1170 - 10 - 1040 - 10 - 16 = 94;      if (client_width < 800 || content_width < 800) window.SOI_BB = window.SOI_PD = false;      if (client_width < 768)  window.SOI_PU1 = window.SOI_PU = window.SOI_PL = window.SOI_FA = window.SOI_HP = false;      if (client_width < 740 || content_width < 740) window.SOI_FB2 = false;    }    catch(e) {}  },  getVarName: function(ad_id) {    return this.lookup[ad_id] || '';  },  insertAd: function(ad_id) {    if (this.inIFrame && !this.session_start)      parent.myAd.syncVars(parent, window);    if (!window.SOI_WERBUNG) return;    if (!window.SoiAd) return;    if (!ad_id && this.inIFrame) ad_id = this.iframe_ad;    if (!ad_id || this.delivered[ad_id]) return;    var varname = this.getVarName(ad_id);    var go = window[varname];    if (go && !this.inIFrame) {      // ugly, but required because some vars are defined late      if (this.original_config) this.original_config[varname] = true;      if (ad_id == 'fullbanner2') {        // no billboard delivery together with performance1        if (this.exists('performance1') && window.SOI_BB) window.SOI_BB = 0;      }      if (ad_id != 'performance1') {        // misconfiguration: target container is missing        // Note that performance1 container is always missing at this point        if (!document.getElementById(this.container_prefix + ad_id))          go = false;      }    }    if (!go) return;    this.delivered[ad_id] = true;    SoiAd.write(ad_id);  },  finishAd: function(ad_id, mode) {    if (!ad_id && this.inIFrame) ad_id = this.iframe_ad;    if (!ad_id || !this.delivered[ad_id] || this.finished[ad_id]) return;    this.finished[ad_id] = true;    if (this.inIFrame) {      if (!parent.myAd) return;      parent.myAd.syncVars(window, parent);      parent.myAd.resizeIFrame(ad_id, window.frameElement.id);      parent.myAd.adjustLayoutForAd(ad_id);    }    else {      if (mode == 'move' || window.SoiAd && SoiAd.isBillboard(ad_id))        this.moveAd(ad_id);      this.adjustLayoutForAd(ad_id);    }  },  moveAd: function(ad_id) {    if (!window.SOI_WERBUNG) return;    if (!window.SoiAd) return;    SoiAd.moveAd(ad_id, this.container_prefix + ad_id + '-postponed', this.container_prefix + ad_id);  },  adjustLayoutForAd: function(ad_id) {    var container_id = this.container_prefix + ad_id;    var container = document.getElementById(container_id);    if (!container) return;    var exists = this.exists(ad_id);    if (exists && container && (ad_id != 'fullbanner2' || !SoiAd.isBillboard(ad_id)))      SoiAd.removeStyleAttribute(container);    if (ad_id == 'popup1') {      // nothing to be done    }    else if (ad_id == 'mlayer1') {      // nothing to be done    }    else {      var width  = 0;      var height = 0;      if (exists) {        width  = SoiAd.getWidth(ad_id);        height = SoiAd.getHeight(ad_id);        /**         * @todo: hack alarm         * overwrite height bcs we changed row height :/         **/        if( ad_id == 'rectangle1' && height == '600' ){          height = 668;          width = 260;        }        container.style.width      = width + 'px';        container.style.visibility = ''; // reset to initial css value      }      if (ad_id == 'fullbanner2') {        if (exists) {          var is_powerbanner = SoiAd.isPowerbanner(ad_id);          var is_pushdown    = SoiAd.isPushdown(ad_id);          var is_wallpaper   = SoiAd.isWallpaper(ad_id);          var is_fireplace   = SoiAd.isFireplace(ad_id);          var is_billboard   = SoiAd.isBillboard(ad_id);          if (!is_pushdown)  container.style.height = height + 'px';          if (!is_billboard) container.style.display = 'block';          if (is_wallpaper || is_fireplace) {            /*            var style = document.createElement('style');            style.type = 'text/css';            style.innerHTML = '.s1-centered { left: -40px; }';            document.getElementsByTagName('head')[0].appendChild(style);            setTimeout(function() {              var i;              var betwinBoxes = document.getElementsByClassName("s1-betwin-box");              for (i = 0; i < betwinBoxes.length; i++) {                betwinBoxes[i].style.right = '40px';              }              var newsFeedToggle = document.getElementById('s1-news-feed-toggle');              if(newsFeedToggle){                newsFeedToggle.style.right = '54px';              }            }, 2000);            */            //if (window.SOI_CONTENT == 'gallery') container.style.paddingBottom = '0px';          }          else if (is_billboard) {            var max_width = this.getContentWidth() || 1040;            var special_id = this.container_prefix + ad_id + '-billboard';            var css_text = '#' + special_id + ' {width: ' + width + 'px; height: ' + height + 'px;'              + ' display: block !important; visibility: visible !important;}\n';            if (width > max_width) {              // Wider than content - centrify via negative margin-left              var delta = parseInt((width - max_width) / 2);              if (delta > 0) css_text += '#ad-fullbanner2-billboard {margin-left: ' + (-1 * delta) + 'px;}'                + '#ad-skyscraper1-outer, #ad-skyscraper2-outer {margin-right:' + (-1 * delta) + 'px;}';            }            if (css_text) SoiUtils.addStyleElement(css_text);          }        }        else {          // collapse if not delivered          container.style.display = 'none';        }      }      else {        if (exists) {          container.style.height  = height + 'px';          container.style.display = 'block';        }        else {          container.style.display = 'none';        }      }    }  },  /*    ad_id, modifier, preserve_space    myAd.clearAd('fullbanner2', '', true);          // div#ad-fullbanner2 and/or iframe#ad-fullbanner2-iframe    myAd.clearAd('performance4', 'ticker3', false); // iframe#ad-performance4-iframe-ticker3  */  clearAd: function(ad_id, modifier, preserve_space) {    var container_id = this.container_prefix + ad_id;    var container = document.getElementById(container_id);    var iframe_id = container_id + '-iframe';    if (modifier) iframe_id += '-' + modifier    var iframe = document.getElementById(iframe_id);    // hide iframe regardless of existence of container    if (iframe) {      preserve_space ?        iframe.style.visibility = 'hidden'      : iframe.style.display = 'none';      try {        this.clearIFrame(ad_id, modifier);      }      catch(e) {}    }    if (container && !modifier) {      if (iframe) {        var children = container.childNodes;        for (var i = children.length - 1; i >= 0; i--) {          var child = children[i];          if (child.id != iframe_id)            container.removeChild(child);        }      }      else {        container.innerHTML = '';      }      ad_id == 'fullbanner2' || preserve_space ?        container.style.visibility = 'hidden' // no jumping      : container.style.display = 'none';    }    if (ad_id == 'fullbanner2' && window.SoiAd && SoiAd.isBillboard(ad_id)) {      var bb_container = document.getElementById(this.container_prefix + ad_id + '-billboard');      if (bb_container) {        bb_container.innerHTML = '';        bb_container.style.display = 'none';        bb_container.style.height = '0px';      }    }  },  clearAds: function(preserve_space) {    for (var k in this.delivered) {      this.clearAd(k, '', preserve_space);    }  },  exists: function(ad_id) {    return window.SoiAd && SoiAd.exists(ad_id) || false;  },  /************************************************************  DOMINO IFRAME FOR AD RELOAD  ************************************************************/  /************************************************************    methods executed in main document  ************************************************************/  /*    {      url: '/some-where/my_ad_iframe.html', // only if not configured via myAd.iframeAdURL      condition: 'tor', // targeting condition for bukw, comma-separated value possible      content: 'content|gallery|video|liveticker|...',      slots: ['performance1, 'performance2', 'ateaser'],      specials: {          performance4: {              insertion_point_id: 'some-id', //              insertion_position: 'after' // after|before|replace|append|clear-append            }        },      subsites: ['fussball', 'bundesliga', 'tore'], // or string fussball/bundesliga/tore      callback: someFunction, // callback to be executed after first reloaded ad      force: true // force reload regardless of last reload time    }  */  updateAds: function(args) {    if (!window.SoiAd) return;    if (!args) args = {};    var iframe_url = args.url || this.iframeAdURL;    if (!iframe_url) return;    var slots = args.slots || [];    if (!slots.length) {      slots = [];      for (var ad_id in this.delivered) {        slots.push(ad_id);      }    }    if (!slots.length) return;    if (this.update_config.running) {      this.messages.push('Previous AdReload still running, ignoring reload for ' + slots.join(', '));      return;    }    if (!args.force && !this.mayReload()) return;    this.update_config = {running: true, start: true, chain: [], varnames: [], subsites: [], specials: args.specials || {}};    this.restoreOriginalConfig();    for (var i = 0; i < slots.length; i++) {      var ad_id = slots[i];      this.activateIfTickerAd(ad_id);      var varname = this.getVarName(ad_id);      if (!varname || !window[varname]) continue;      // check availability of insertion point      var container_id;      if (this.update_config.specials        && this.update_config.specials[ad_id]        && this.update_config.specials[ad_id].insertion_point_id) {        container_id = this.update_config.specials[ad_id].insertion_point_id;      }      else {        container_id = this.container_prefix + ad_id;      }      var container = document.getElementById(container_id);      if (!container) continue;      this.update_config.chain.push(ad_id);      this.update_config.varnames.push(varname);      // preserve vertical space => third argument true      this.clearAd(ad_id, '', true);    }    if (!this.update_config.chain.length) {      this.update_config.running = false;      return;    }    this.update_config.subsites = [];    if (args.subsites) {      if (typeof args.subsites == 'string') {        args.subsites = args.subsites.replace(/\/{2,}/g, '/').replace(/^\//, '').replace(/\/$/, '');        this.update_config.subsites = args.subsites.split('/');      }      else if (args.subsites.length) {        for (var i = 0; i < args.subsites.length; i++) {          this.update_config.subsites.push(args.subsites[i] || '');        }      }    }    if (!this.update_config.subsites.length || !this.update_config.subsites[0]) {      for (var i = 1; i < 7; i++) {        var name = 'SOI_SUB' + (i == 1 ? '' : i) + 'SITE';        if (!window[name]) break;        this.update_config.subsites.push(window[name]);      }    }    this.update_config.content   = args.content || '';    this.update_config.condition = args.condition || '';    if (args.callback && typeof args.callback == 'function')      this.update_config.callback = args.callback;    if (this.timeoutId) {      // cancel possibly waiting post message ticker ad      clearTimeout(this.timeoutId);      delete this.timeoutId;    }    if (this.timeoutCleanup) {      try {        this.timeoutCleanup();      }      catch(e) {}      delete this.timeoutCleanup;    }    this.last_reload = new Date().getTime();    this.triggerIFrame();    return true;  },  mayReload: function() {    this.interval = Math.max(this.interval, this.interval_minimums[window.SOI_CONTENT] || this.interval_minimums.other);    return (this.last_reload && new Date().getTime() - this.last_reload < this.interval) ? false : true;  },  resetVars: function() {    if (window.SoiAd) SoiAd.resetVars();  },  syncVars: function(from, to) {    if (!window.SoiAd || from == to) return;    var ad_id = this.iframe_ad;    if (from == window) { // domino iframe => parent      SoiAd.syncVars(from, to);    }    else if (to == window) { // parent => domino iframe      var params = this.getIFrameParams();      if (!params.start) {        SoiAd.syncVars(from, to);      }    }  },  /*    {      url: '/some-where/my_ad_iframe.html', // if not configured via myAd.iframeAdURL      insertion_point_id: 'some-id', //      insertion_position: 'after' // after|before|replace|append|clear-append    }  */  triggerIFrame: function(ad_id, args) {    if (!args) args = {};    if (!ad_id && this.update_config.chain && this.update_config.chain.length) {      try {        ad_id = this.update_config.chain.shift();        if (ad_id && this.update_config.specials          && this.update_config.specials[ad_id]          && typeof this.update_config.specials[ad_id] == 'object')            args = this.update_config.specials[ad_id];      }      catch(e) {}    }    if (!ad_id) return;    this.activateIfTickerAd(ad_id);    // url?ad_id=performance1&start=1&r=12345    var url = args.url || this.iframeAdURL;    if (!url) return;    var insertion_point_id = args.insertion_point_id || this.container_prefix + ad_id;    var ordinary = insertion_point_id == this.container_prefix + ad_id ? true : false;    var insertion_position = ordinary ? 'clear-append' : args.insertion_position || 'clear-append';    var iframe_class = this.container_prefix + ad_id + '-iframe';    var iframe_id = ordinary ? iframe_class : iframe_class + '-' + insertion_point_id;    var iframe = document.getElementById(iframe_id);    if (!iframe) {      var insertion_point = document.getElementById(insertion_point_id);      if (!insertion_point) return;      iframe = document.createElement('iframe');      iframe.className         = iframe_class + ' ad-wrapper';      iframe.id                = iframe_id;      iframe.name              = iframe_id;      iframe.marginWidth       = 0;      iframe.marginHeight      = 0;      iframe.src               = 'about:blank'; // do not set url yet (older FF issues)      iframe.frameBorder       = 0;      iframe.border            = 0;      iframe.scrolling         = 'no';      iframe.allowTransparency = true;      switch (insertion_position) {        case 'before':          insertion_point.parentNode.insertBefore(iframe, insertion_point);          break;        case 'after':          insertion_point.parentNode.insertBefore(iframe, insertion_point.nextSibling);          break;        case 'replace':          insertion_point.parentNode.replaceChild(iframe, insertion_point);          break;        case 'append':          insertion_point.appendChild(iframe);          break;        default: // clear-append          insertion_point.innerHTML = '';          insertion_point.appendChild(iframe);          break;      }    }    url += (url.match(/\?/) ? '&' : '?') + 'ad_id=' + ad_id    if (this.update_config.start) {      url += '&start=1';      this.update_config.start = false;    }    url += '&r=' + (args.cachebuster || parseInt(Math.random()*1000000000));    this.loadIFrame(iframe, url);    if (!this.update_config.chain || !this.update_config.chain.length)      this.update_config.running = false;    return true;  },  // special handling for ticker ads  // force SOI variable to true  // see updateAds for score board ticker ads  // see triggerIFrame for post message ticker ads  activateIfTickerAd: function(ad_id) {    switch (window.SOI_CONTENT) {      case 'liveticker':        switch (ad_id) {          case 'performance1': // desktop          case 'performance4': // desktop          case 'performance5': // mew          case 'performance6': // mew            var varname = this.lookup[ad_id];            if (varname) window[varname] = true;            break;        }        break;      case 'radio':        switch (ad_id) {          case 'performance2': // desktop            var varname = this.lookup[ad_id];            if (varname) window[varname] = true;            break;        }        break;    }  },  loadIFrame: function(arg, url) {    var iframe = typeof arg == 'string' ? document.getElementById(arg) : arg;    if (!iframe) return;    if (!url) url = 'about:blank';    var iframe_window = iframe.contentWindow;    if (!iframe_window) {      try {        iframe_window = iframe.contentDocument.defaultView;      }      catch(e) {        try {          if (iframe.id) iframe_window = window.frames[iframe.id];        }        catch(e) {}      }    }    try {      // This does not add to window.history.      iframe_window.location.replace(url);    }    catch(e) {      // Not desirable because this adds to window.history.      iframe.src = url;    }    return true;  },  resizeIFrame: function(ad_id, iframe_id) {    if (!iframe_id) iframe_id = this.container_prefix + ad_id + '-iframe';    var iframe = document.getElementById(iframe_id);    if (!iframe) return;    if (this.exists(ad_id)) {      iframe.style.width      = SoiAd.getWidth(ad_id) + 'px';      iframe.style.height     = SoiAd.getHeight(ad_id) + 'px';      iframe.style.display    = 'block';      iframe.style.visibility = ''; // reset to initial css value    }    else {      iframe.style.display = 'none';    }  },  clearIFrame: function(ad_id, modifier) {    if (!ad_id) return;    var iframe_id = this.container_prefix + ad_id + '-iframe';    if (modifier) iframe_id += '-' + modifier;    this.loadIFrame(iframe_id , 'about:blank');  },  doCallback: function(ad_id) {    if (!this.update_config.callback      || typeof this.update_config.callback != 'function')        return;    try {      this.update_config.callback(ad_id);      delete this.update_config.callback;    }    catch(e) {}  },  /************************************************************    methods executed in domino iframe  ************************************************************/  getIFrameParams: function() {    if (!this.iframe_params) {      var invalid_chars = new RegExp('[^a-zA-Z0-9\/_-]');      var query = window.location.search.substr(1) || '';      var pairs = String(query).split('&');      this.iframe_params = {};      for (var i = 0; i < pairs.length; i++) {        if (!pairs[i]) continue;        var set = pairs[i].split(/=/);        if (set[0] && set[1] && !String(set[1]).match(invalid_chars))          this.iframe_params[set[0]] = String(set[1]).toLowerCase();      }    }    return this.iframe_params;  },  setIFrameConfig: function() {    var master = parent.myAd;    if (!master) return;    var params = this.getIFrameParams();    var ad_id = params.ad_id;    if (!ad_id) return;    this.iframe_ad = ad_id;    var varname = this.getVarName(ad_id);    if (!varname) return;    window.SOI_FRA = true;    window.SOI_SITE    = parent.SOI_SITE;    window.SOI_WERBUNG = true;    window.SOI_CONTENT = master.update_config.content || parent.SOI_CONTENT;    window.SOI_VP = parent.SOI_VP;    window.SOI_LPY = parent.SOI_LPY;    window.SOI_VA1 = parent.SOI_VA1;    window.SOI_VA2 = parent.SOI_VA2;    window.SOI_VA3 = parent.SOI_VA3;    window.SOI_VA4 = parent.SOI_VA4;    window.SOI_VA5 = parent.SOI_VA5;    // SOI_SUB*SITE    var subsites = master.update_config.subsites || [];    for (var i = 0; i < subsites.length; i++) {      if (!subsites[i]) break;      window['SOI_SUB' + (i == 0 ? '' : i + 1) + 'SITE'] = subsites[i];    }    // set SOI variables for *all* chained ads    var varnames = master.update_config.varnames || [];    for (var i = 0; i < varnames.length; i++) {      if (varnames[i]) window[varnames[i]] = true;    }    window.SOI_KEYVALUE = {};    if (parent.SOI_KEYVALUE) {      for (var k in parent.SOI_KEYVALUE) {        if (k == 'bukw') continue;        window.SOI_KEYVALUE[k] = parent.SOI_KEYVALUE[k];      }    }    if (master.update_config.condition)      window.SOI_KEYVALUE.bukw = master.update_config.condition;    if (parent.SOI_KEYWORDS) window.SOI_KEYWORDS = parent.SOI_KEYWORDS;    if (params.start) {      this.session_start = true; // no need to reset, lives in domino iframe only      master.resetVars(); // not earlier    }    else {      window.SOI_INIT_DONE = true;    }  },  triggerNextIFrame: function() {    if (parent == window) return;    parent.myAd.doCallback(this.iframe_ad);    parent.myAd.triggerIFrame();  },  /************************************************************  Video Ads  ************************************************************/  // No exclusiveness for video ads (i.e. no clearAds)  // (issue with initial initialisiation of all rolltypes)  videoAdRequest: function(ad_id, data) {    if (!window.SOI_WERBUNG || !window.DFPSite || !window.SoiAd) return '';    if (window.SOI_VP === false) return ''; // return here only if explicitly false    if (!data) data = {};    var saved = {};    if (window.SOI_CONTENT != 'video') {      // on-the-fly adjustment for interactive players      saved.SOI_VP = window.SOI_VP;      window.SOI_VP = true;      for (var i = 1; i < 6; i++) {        var name = 'SOI_VA' + i;        if (window[name] === false) continue; // do not clobber if explicitly forbidden        saved[name] = window[name];        window[name] = true;      }    }    if (!window.SOI_VP) return ''; // if false, or still not set    var lookup = {      preroll:  window.SOI_VA1,      postroll: window.SOI_VA2,      midroll:  window.SOI_VA3,      overlay:  window.SOI_VA4,      sponsor:  window.SOI_VA5    };    var type = String(ad_id).replace(/[0-9]+[a-z]?$/, '');    if (!lookup[type]) return '';    // Re-initialize in case of repeated video view    if (this.seen && ad_id.match(/^preroll1a?$/)) {      if (window.SoiInitDFPVars) window.SoiInitDFPVars();      window.SOI_AUTOPLAY = 'off';    }    this.seen = true;    var ad_request = '';    try {      if (window.DFPSite.match(/\.liveticker$/)) {        data.dfpsite = window.DFPSite.replace(/\.liveticker$/, '.video');      }      else if (window.DFPSite != 'showroom' && !window.DFPSite.match(/\.video$/)) {        data.dfpsite = window.DFPSite + '.video';        if (String(window.DFPZone).match(/\.home$/))          data.dfpzone = window.DFPZone.replace(/\.home$/, '');        if (window.DFPZone == 'home') data.dfpzone = 'other';      }      ad_request = SoiAd.videoAd(ad_id, data);    }    catch(e) {}    // Reset global variables    for (var k in saved) {      window[k] = saved[k];    }    return ad_request || '';  },  /*    adbreaks: {preroll1: 'pre', sponsor1: 'pre', midroll1: 420, midroll2: 900, postroll1: 'post'}  */  addAdvertisingToJWConfig: function(config, adbreaks, admessage) {    if (!config || !adbreaks || typeof adbreaks != 'object') return config;    if (!admessage) admessage = this.admessage;    admessage = String(admessage).replace(/XX/g, 'xx');    var advertising = {};    var schedule = {};    for (var ad_id in adbreaks) {      ad_id = ad_id.replace(/a$/, ''); // midroll1a => midroll1      if (ad_id.match(/[0-9][b-e]$/)) continue; // set in loop below      if (ad_id == 'sponsor1') continue; // set together with preroll1      if (ad_id.match(/^(overlay|pause)/)) continue; // buggy display      var position;      switch (ad_id) {        case 'preroll1':          position = 'pre';          break;        case 'postroll1':          position = 'post';          break;        default:          position = Number(adbreaks[ad_id]);          break;      }      // JWPlayer 6.8 does not support multiple ads per break      var can_multiple_ads_per_break = false;      var total = can_multiple_ads_per_break && ad_id.match(/^midroll/) ? 5 : 1;      for (var i = 1; i <= total; i++) {        var x = i == 1 ? ad_id : ad_id + String.fromCharCode(String('a').charCodeAt(0) + i - 1);        var url = this.videoAdRequest(x);        if (url) {          advertising.client = 'googima';          schedule[x] = {offset: position, tag: url};          if (x.match(/^(overlay|pause)/)) schedule[x].type = 'nonlinear';        }        if (x == 'preroll1' && adbreaks.sponsor1) { // order is important          var y = 'sponsor1';          var url = this.videoAdRequest(y);          if (url) schedule[y] = {offset: position, tag: url};        }      }    }    if (advertising.client) {      advertising.schedule = schedule;      advertising.admessage = admessage;      config.advertising = advertising;    }    return config;  }};Áù       Wû{ÓWû{Ó<ü™±Wû|   `    :http://assets.sport1.de/bundles/sport1portal/libs/my_ad_integration/my_ad_integration.js?v=v249 necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Content-Type: application/javascript
Etag: "57f64907-78c6"
Accept-Ranges: bytes
X-Cache-Hits: 0
Access-Control-Allow-Origin: *
X-Served-By: lnxv-8153
X-By-Backend: vdirsport1
Expires: Mon, 10 Oct 2016 11:31:30 GMT
Date: Mon, 10 Oct 2016 11:29:36 GMT
Cache-Control: max-age=114
Via: 1.1 ISA01TMG
Last-Modified: Thu, 06 Oct 2016 12:52:23 GMT
 original-response-headers Via: 1.1 ISA01TMG
Connection: Keep-Alive
Proxy-Connection: Keep-Alive
Transfer-Encoding: chunked
Expires: Mon, 10 Oct 2016 09:53:37 GMT
Date: Mon, 10 Oct 2016 09:52:20 GMT
Content-Type: application/javascript
Etag: "57f64907-78c6"
Accept-Ranges: bytes
Last-Modified: Thu, 06 Oct 2016 12:52:23 GMT
X-Cache-Hits: 0
Access-Control-Allow-Origin: *
X-Served-By: lnxv-8153
X-By-Backend: vdirsport1
Cache-Control: max-age=77
 uncompressed-len 0   xÆ