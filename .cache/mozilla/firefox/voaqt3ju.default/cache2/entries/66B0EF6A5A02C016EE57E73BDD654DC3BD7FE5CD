(function(window){
/*! 1.26.0 - Lajos Meszaros.master.35085b690f3 */

var dom;(function(){"use strict";dom={on:function(){var args=utils.cloneArray(arguments);var element=args.shift();var oldIE=!element.addEventListener;if(oldIE){args=["on"+args[0],args[1].bind(element)]}element[oldIE?"attachEvent":"addEventListener"].apply(element,args);return this},off:function(){var args=utils.cloneArray(arguments);var element=args.shift();var oldIE=!element.addEventListener;if(oldIE){args=["on"+args[0],args[1].bind(element)]}element[oldIE?"detachEvent":"removeEventListener"].apply(element,args);return this},text:function(element,content){var isIE=Spieler.browser.is.ie;var method=isIE!==false&&isIE<=8?"innerText":"textContent";if(content){element[method]=content;return this}else{return element[method]}},addCSS:function(style,inline){var inline=inline||false;var css=document.createElement(inline?"style":"link");css.type="text/css";document.getElementsByTagName("head")[0].appendChild(css);if(inline){try{css.innerHTML=style}catch(e){css.styleSheet.cssText=style}}else{css.rel="stylesheet";css.href=style}},createElement:function(tag,attributes,children){var attributes=attributes||{};var children=children||[];var element=document.createElement(tag);Object.keys(attributes).forEach(function(attribute){var value=attributes[attribute];switch(attribute){case"text":dom.text(element,value);break;case"html":element.innerHTML=value;break;case"data":for(var attr in value){element.setAttribute("data-"+attr,value[attr])}break;case"on":if(typeof value==="object"){Object.keys(value).forEach(function(name){dom.on(element,name,value[name])})}break;default:element.setAttribute(attribute,value)}});children.forEach(function(child){if(typeof child==="string"){child=document.createTextNode(child)}element.appendChild(child)});return element}};if(!("classList"in document.createElement("div"))){var toWordWrapRegex=function(word,flags){return new RegExp("(?:\\s+|^)"+word+"(?:\\s+|$)",utils.toZeroString(flags))};dom.hasClass=function(element,className){return toWordWrapRegex(className).test(element.className)};dom.removeClass=function(element,className){element.className=element.className.replace(toWordWrapRegex(className,"g")," ").trim()};dom.addClass=function(){var args=utils.cloneArray(arguments);var element=args.shift();if(!element)return;var c=element.className.split(/\s+/);args.forEach(function(className){className=utils.toZeroString(className);if(className.length>0&&c.indexOf(className)===-1){c.push(className)}});element.className=c.join(" ")}}else{dom.hasClass=function(element,className){return element.classList.contains(className)};dom.removeClass=function(element,className){element.classList.remove(className)};dom.addClass=function(){var args=utils.cloneArray(arguments);var element=args.shift();if(!element)return;args.forEach(function(className){element.classList.add(className)})}}})();(function(){"use strict";if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==="[object Array]"}}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(this==null){throw new TypeError('"this" is null or not defined')}var O=Object(this);var len=O.length>>>0;if(len===0){return-1}var n=+fromIndex||0;if(Math.abs(n)===Infinity){n=0}if(n>=len){return-1}k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===searchElement){return k}k++}return-1}}if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var toArray=function(a){var arr=[];for(var i=a.length;i--;arr.unshift(a[i]));return arr};var aArgs=toArray(arguments).slice(1);var fToBind=this;var fNOP=function(){};var fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(toArray(arguments)))};fNOP.prototype=this.prototype;fBound.prototype=new fNOP;return fBound}}if(!Array.prototype.find){Array.prototype.find=function(predicate){if(this===null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof predicate!=="function"){throw new TypeError("predicate must be a function")}var list=Object(this);var length=list.length>>>0;var thisArg=arguments[1];var value;for(var i=0;i<length;i++){value=list[i];if(predicate.call(thisArg,value,i,list)){return value}}return undefined}}if(!Object.keys){Object.keys=function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if(typeof obj!=="object"&&(typeof obj!=="function"||obj===null)){throw new TypeError("Object.keys called on non-object")}var result=[],prop,i;for(prop in obj){if(hasOwnProperty.call(obj,prop)){result.push(prop)}}if(hasDontEnumBug){for(i=0;i<dontEnumsLength;i++){if(hasOwnProperty.call(obj,dontEnums[i])){result.push(dontEnums[i])}}}return result}}()}if(!Array.prototype.forEach){Array.prototype.forEach=function(callback,thisArg){var T,k;if(this==null){throw new TypeError(" this is null or not defined")}var O=Object(this);var len=O.length>>>0;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}if(arguments.length>1){T=thisArg}k=0;while(k<len){var kValue;if(k in O){kValue=O[k];callback.call(T,kValue,k,O)}k++}}}if(!Array.prototype.every){Array.prototype.every=function(callbackfn,thisArg){var T,k;if(this==null){throw new TypeError("this is null or not defined")}var O=Object(this);var len=O.length>>>0;if(typeof callbackfn!=="function"){throw new TypeError}if(arguments.length>1){T=thisArg}k=0;while(k<len){var kValue;if(k in O){kValue=O[k];var testResult=callbackfn.call(T,kValue,k,O);if(!testResult){return false}}k++}return true}}if(!Array.prototype.filter){Array.prototype.filter=function(fun){if(this===void 0||this===null){throw new TypeError}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError}var res=[];var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisArg,val,i,t)){res.push(val)}}}return res}}if(!Array.prototype.reduce){Array.prototype.reduce=function(callback){if(this==null){throw new TypeError("Array.prototype.reduce called on null or undefined")}if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}var t=Object(this),len=t.length>>>0,k=0,value;if(arguments.length==2){value=arguments[1]}else{while(k<len&&!(k in t)){k++}if(k>=len){throw new TypeError("Reduce of empty array with no initial value")}value=t[k++]}for(;k<len;k++){if(k in t){value=callback(value,t[k],k,t)}}return value}}var console=window.console;var logFns=["log","info","warn","error","assert","dir","clear","profile","profileEnd"];if(typeof console=="undefined"){console={}}for(var i=0;i<logFns.length;i++){var method=logFns[i];if(typeof console[method]=="undefined"){console[method]=function(){}}}if(typeof console=="object"&&typeof console.log=="object"){for(var i=0;i<logFns.length;i++){var method=logFns[i];console[method]=Function.prototype.call.bind(console[method],console)}}window.console=console;if(window.attachEvent&&!window.attachEvent.apply){window.attachEvent=Function.prototype.call.bind(window.attachEvent,window)}})();var utils;(function(){"use strict";function createIEObject(url,params){params.movie=url;var paramList="";for(var i in params){paramList+='<param name="'+i+'" value="'+params[i]+'">'}var div=document.createElement("div");div.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+paramList+"</object>";return div.firstChild}function createObject(url,params){var obj=document.createElement("object");obj.setAttribute("type","application/x-shockwave-flash");obj.setAttribute("data",url);for(var i in params){var param=document.createElement("param");param.setAttribute("name",i);param.setAttribute("value",params[i]);obj.appendChild(param)}return obj}function removeIEObject(obj){if(obj.readyState){if(obj.readyState===4||obj.readyState==="complete"){for(var i in obj){if(typeof obj[i]==="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}else{setTimeout(function(){removeIEObject(obj)},100)}}else{obj.parentNode.removeChild(obj)}}function removeObject(obj){obj.parentNode.removeChild(obj)}utils={extend:function(){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(arguments[i].hasOwnProperty(key)){arguments[0][key]=arguments[i][key]}}}return arguments[0]},cloneArray:function(a){var arr=[];for(var i=a.length;i--;arr.unshift(a[i]));return arr},cloneObject:function(o){return this.extend({},o)},deprecate:function(obj,key,name){if(navigator.userAgent.indexOf("MSIE 8")!==-1){return}var notificationSent=false;var value=typeof obj[key]==="function"?obj[key].bind(obj):obj[key];Object.defineProperty&&Object.defineProperty(obj,key,{get:function(){if(!notificationSent){console.warn("Spieler: "+name+" is now deprecated"+"and will be removed in the next major version.");notificationSent=true}return value}})},isEmptyVideo:function(e){return e.getAttribute("src")===""},resetVideoElement:function(videoElement){videoElement.setAttribute("style","")},embedFlash:function(url,params,attrs){var isOldIE=Spieler.browser.is.ie!==false&&Spieler.browser.is.ie<11;var obj=(isOldIE?createIEObject:createObject)(url,params);if(attrs){for(var i in attrs){obj.setAttribute(i,attrs[i])}}return obj},deleteFlash:function(obj){var isOldIE=Spieler.browser.is.ie!==false&&Spieler.browser.is.ie<11;if(isOldIE){obj.style.display="none";removeIEObject(obj)}else{removeObject(obj)}},isHTTPS:function(){return window.location.protocol==="https:"},bindAll:function(obj){var key;for(key in obj){if(typeof obj[key]==="function"){obj[key]=obj[key].bind(obj)}}},toZeroString:function(variable){var ret=variable!==undefined&&!(typeof variable==="number"&&isNaN(variable))&&[null,Infinity].indexOf(variable)===-1&&!Array.isArray(variable)?""+variable:"";if(ret==="[object Object]"){ret=""}return ret},randomNumber:function(){return Math.floor(Math.random()*1e6)},addCacheBuster:function(url){if(url.indexOf("?")!==-1){var urlParts=url.split("?");urlParts[1]=urlParts[1].replace(/(?:^|&)random=(?:[^&]*|$)/,"");url=urlParts[1]!==""?urlParts.join("?"):urlParts[0]}url+=(url.indexOf("?")!==-1?"&":"?")+"random="+utils.randomNumber();return url}}})();(function(window){"use strict";if(window.Spieler&&!window.SpielerOverride){return}var instances={};var benchmark={};var Spieler=function(element,resources,config){console.log("new Spieler");var self=this;var media;var upid;var elements;var screen;var ui;var dispatcher=new Dispatcher;var hooks=new HookManager;var _volume=.8;var _muted=false;var ncm;var nfm;var inHTML5FS;var state={playState:"stopped",playing:null,posterClicked:true,uninitialized:true,finishedPlayback:false,passive:false};Object.defineProperty(this,"_state",{get:function(){return JSON.parse(JSON.stringify(state))},set:function(){}});var poster;function hidePoster(){if(Spieler.browser.is.firefox){elements.video.removeAttribute("poster")}else{elements.video.poster=""}}function showPoster(){elements.video.poster=Spieler.browser.is.iOS!==false?utils.addCacheBuster(config.poster):config.poster}dispatcher.add(Spieler.events.PLAYING,function(){state.posterClicked=true;hidePoster()});dispatcher.add(Spieler.events.POSTCLIPDONE,function(){if(config.nativeControls||config.basicUi){state.posterClicked=false}if(config.poster){showPoster()}elements.video.load();dispatcher.dispatch(Spieler.events.PAUSE);state.finishedPlayback=true});benchmark.start=(new Date).getTime();if(!config){config={}}this._configOverrides={};this.dispatcher=dispatcher;dispatcher.add(Media.events.PLATFORMCHANGE,onMediaPlatformChange);dispatcher.add(Spieler.events.END,function(){hooks.exec("post-clip",{resources:self.media},function(error){if(error){console.error("Spieler: post-clip hook failed.",error);return}dispatcher.dispatch(Spieler.events.POSTCLIPDONE)});state.playState="stopped"});this.playState=function(){return state.playState};dispatcher.add(Spieler.events.PLAYING,function(){state.playState="playing"});dispatcher.add(Spieler.events.PAUSED,function(){state.playState="paused"});this.hooks=hooks;state.playing=config.autoplay!==undefined?config.autoplay:true;if(state.playing&&Spieler.browser.is.smartphone){console.warn("Spieler: autoplay is not supported on mobile devices, overriding config");state.playing=false}_volume=config.volume!==undefined?config.volume:1;_muted=config.muted!==undefined?config.muted:false;if(!element){throw new Error("missing container element")}if(typeof element==="string"){element=document.getElementById(element)}elements=this.elements=initDOM(element);if(!config.hasOwnProperty("nativeFullscreen")){config.nativeFullscreen=Spieler.browser.fs["html5"]!==true}if(config.nativeFullscreen){nfm=new NativeFullscreenManager(elements.video,dispatcher,(!config.nativeControls))}if(config.nativeControls){ncm=new NativeControlsManager(elements.video,dispatcher);ncm.enable()}setTimeout(function(){var flashForContent=config.denyFlash!==true;var flashForLiverail=config.plugins.liveRailVpaid&&config.plugins.liveRailVpaid.denyFlash!==true;if((flashForContent||flashForLiverail)&&Spieler.browser.has.flash()&&(ncm||nfm)){var f=[];if(flashForContent)f.push("content");if(flashForLiverail)f.push("liverail");var n=[];if(ncm)n.push("native controls");if(nfm)n.push("native fullscreen");var isAre=!ncm&&nfm?"is":"are";var msg="Spieler: native fullscreen/controls are not supported with Flash!";var reason=" (flash is enabled for "+f.join(" and ")+", while "+n.join(" and ")+" "+isAre+" also enabled)";console.error(msg+reason)}});upid=config.upid||"upid_"+utils.randomNumber();instances[upid]={instance:this,arguments:arguments};function onUiLoaded(){var uiClass=SpielerBasicUI(dom,utils);if(config.nativeFullscreen){config.basicUi.nativeFullscreen=config.nativeFullscreen}ui=new uiClass(elements.ui,self,config.basicUi,state);console.log("BASICUI loaded")}function createUI(spieler){if(config.basicUi===true){config.basicUi={}}if(config.basicUi&&!ui){var el=document.createElement("script");el.type="text/javascript";el.src=Spieler.path+"basicui.js";dom.on(el,"load",function(){onUiLoaded()});dom.on(el,"readystatechange",function(){if(el.readyState==="loaded"||el.readyState==="complete"){onUiLoaded()}});document.getElementsByTagName("head")[0].appendChild(el)}}function init(resources){if(!resources){console.warn("Spieler: halted initialization since given resource is empty");return}pokeVideo();state.uninitialized=false;benchmark.init=(new Date).getTime();if(hooks.isEnabled("pre-init")){dispatcher.dispatch(Spieler.events.PLAY)}hidePoster();hooks.exec("pre-init",{resources:resources,configOverrides:{}},function(error,data){var configOverrides=data&&data.configOverrides;if(configOverrides){self._configOverrides=data.configOverrides}if(error){console.error("Spieler: pre-init hook failed.",error);return}if(configOverrides&&configOverrides.denyFlash===true){if(config.denyFlash!==true){console.warn("Spieler: overriding denyFlash with "+configOverrides.denyFlash+" (was "+config.denyFlash+")");config.denyFlash=configOverrides.denyFlash}}console.log("Spieler: cleaning up video element after pre-init");utils.resetVideoElement(elements.video);loadMedia(resources);if(Spieler.browser.is.IOS||Spieler.browser.is.OSX){if(Spieler.browser.fs.isFullscreenElement(elements.main)||nfm&&nfm.inFullscreen()){dispatcher.dispatch(Spieler.events.PLAY)}}})}function loadMedia(resources){console.log("Spieler: initializing media",resources);self.media=media=new Media(config.denyFlash,dispatcher);if(typeof resources==="object"||typeof resources==="string"){if(resources.metadata&&resources.metadata.tokenized){hooks.exec("streamurl-needed",resources,function(error,newResources){if(error||!newResources){console.error("Spieler: streamurl-needed hook failed.")}else{media.load(newResources)}})}else{media.load(resources)}}else{console.error("Spieler: invalid, or no media specified")}}function onMediaPlatformChange(){benchmark.screen=(new Date).getTime();if(screen&&!screen.isDestroyed()){screen.destroy();screen=null}var flashPlatform=media.isFlashBasedPlatform();if(flashPlatform===true){screen=new FlashScreen(elements.view,self,media)}else if(flashPlatform===false){screen=new TagScreen(elements.view,self,media);if(config.forceFullscreen){self.fullscreen()}}else{dispatcher.dispatch(Spieler.events.UNSUPPORTEDFORMAT)}}function isPlayingSupportedFormat(){var allPlatforms=Object.keys(Media.PLATFORM).reduce(function(prev,curr){return prev+Media.PLATFORM[curr]},0);return(allPlatforms&media.platform())>0}this.play=function(newResources,internal,noPreInit){if(!newResources&&state.playState==="paused"){this.resume();return}var previousUninitialized=state.uninitialized;if(newResources){if(!internal){dispatcher.dispatch(Spieler.events.MEDIACHANGE,newResources)}resources=newResources;if(noPreInit){loadMedia(newResources)}else{init(newResources)}}else if(resources){if(state.uninitialized){if(config.nativeControls){loadMedia(resources)}else{init(resources)}}else if(state.finishedPlayback){reinit()}}if(self.getPassiveState()||media!==undefined&&isPlayingSupportedFormat()){dispatcher.dispatch(Spieler.events.PLAY)}else{state.uninitialized=previousUninitialized;utils.resetVideoElement(elements.main)}};this.resume=function(){state.playing=true;if(this.dfp&&this.dfp.getCurrentPosition()!=null){this.dfp.resume()}else if(screen){screen.resume();dispatcher.dispatch(Spieler.events.PLAY)}};this.pause=function(){dispatcher.dispatch(Spieler.events.PAUSE)};this.currentTime=function(value){return screen?screen.currentTime(value):-1};this.buffered=function(){return screen?screen.buffered():-1};this.duration=function(){return screen?screen.duration():-1};this.volume=function(value){if(value!==undefined){_volume=value;if(screen){screen.volume(value)}dispatcher.dispatch(Spieler.events.VOLUMECHANGE,value)}return _volume};this.muted=function(value){if(value!==undefined){_muted=value;if(screen){screen.muted(value)}dispatcher.dispatch(Spieler.events.MUTEDCHANGE,value)}return _muted};this.quality=function(value){if(!this.absAvailable()){if(!media){return 0}if(value!==undefined){if(value<0||value>media.qualities()-1){return-1}var lastCurrentTime=this.currentTime();media.quality(value);dispatcher.dispatch(Media.events.PLATFORMCHANGE);if(lastCurrentTime>0){if(Spieler.browser.is.iOS==8){dispatcher.addOnce(Spieler.events.PLAYING,function(){self.currentTime(lastCurrentTime);lastCurrentTime=0})}else{dispatcher.addOnce(Spieler.events.DURATIONCHANGE,function(){console.log("quality seek",lastCurrentTime);self.currentTime(lastCurrentTime);lastCurrentTime=0})}}dispatcher.dispatch(Spieler.events.QUALITY)}else{return media.quality()}}else if(this.mbsAvailable()){if(value!==undefined){if(screen instanceof FlashScreen){screen.abs(false);screen.quality(value)}}else{return screen?screen.quality(-1):0}}else{return-1}};this.qualityList=function(){if(this.mbsAvailable()&&screen){return screen.qualityList()}if(!this.absAvailable()&&media){return media.qualityList()}return[]};this.qualities=function(){if(this.mbsAvailable()&&screen){return screen.qualities()}if(!this.absAvailable()&&media){return media.qualities()}return 1};this.abs=function(value){return screen?screen.abs(value):false};this.absAvailable=function(){return media?media.absAvailable():false};this.mbsAvailable=function(){return media?media.mbsAvailable():false};this.fullScreen=function(value){console.log("Spieler: fullscreen requested: ",value);var entering=value===true||value===undefined&&(!Spieler.browser.fs.isFullscreenElement(elements.main)||nfm&&!nfm.inFullscreen());if(entering){if(Spieler.browser.fs[config.nativeFullscreen?"native":"html5"]===true){if(Spieler.userInteraction===false){console.error("Spieler: going fullscreen requires user interaction");dispatcher.dispatch(Spieler.events.FULLSCREENERROR)}else{dispatcher.dispatch(Spieler.events.FULLSCREEN,{enter:true,exit:false,toggle:false})}}else{console.error("Spieler: going fullscreen is not available for spieler in this context");dispatcher.dispatch(Spieler.events.FULLSCREENERROR)}}else{dispatcher.dispatch(Spieler.events.FULLSCREEN,{enter:false,exit:true,toggle:false})}};this.fullscreen=this.fullScreen;this.playing=function(){return state.playing};this.upid=function(){return upid};this.destroy=function(){dispatcher.dispatch(Spieler.events.DESTROY);if(screen&&!screen.isDestroyed()){screen.destroy();screen=null}if(dispatcher){dispatcher.destroy()}element.innerHTML="";delete instances[upid]};this.isFlashEnabled=function(){return!config.denyFlash&&Spieler.browser.has.flash()};this.changePassiveState=function(newState){if(newState!==state.passive){state.passive=newState;console.log('Spieler: Passive state changed to "'+(newState?"passive":"active")+'"');dispatcher.dispatch(Spieler.events.PASSIVESTATECHANGED,state.passive)}};this.getPassiveState=function(){return state.passive};var poked=false;function pokeVideo(){if(!Spieler.browser.is.smartphone||Spieler.browser.is.firefox||poked){return}if(Spieler.userInteraction===false&&!elements.video.controls){throw new Error("This operation has to be done in response to a UI interaction.")}poked=true;if(state.uninitialized&&(self.hooks.isEnabled("pre-init")||self.hooks.isEnabled("streamurl-needed"))){console.log("Spieler: poking video");elements.video.play();elements.video.pause()}}function reinit(){if(screen&&!screen.isDestroyed()){screen.destroy();screen=null}var previousUninitialized=state.uninitialized;state.posterClicked=true;state.finishedPlayback=false;init(resources);if(media!==undefined&&isPlayingSupportedFormat()||media===undefined&&hooks.isEnabled("pre-init")){dispatcher.dispatch(Spieler.events.PLAY)}else{state.uninitialized=previousUninitialized;state.posterClicked=false;showPoster()}}dispatcher.add(Spieler.events.PLAY,function(eventName,data){state.playing=true;if(data&&data.feedback){if(!state.posterClicked){if(config.nativeControls){reinit()}}else{state.playState="playing"}}else{pokeVideo()}});dispatcher.add(Spieler.events.PAUSE,function(){state.playing=false});dispatcher.add(Spieler.events.ERROR,function(e,data){if(self.media.sources.length>0){if(self.media.qualities()>1){self.quality(self.quality()+1)}else{self.media.sources.shift();loadMedia(self.media.sources)}console.log("Spieler: error loading media, trying next format")}});dispatcher.add(Spieler.events.GETSIZE,function(eventName,data){console.log("GETSIZE",data.width,data.height);if(config.autoSize){element.style.width=data.width+"px";element.style.height=data.height+"px"}benchmark.getSize=(new Date).getTime();console.info("getSize "+(benchmark.getSize-benchmark.screen)+"ms");if(screen instanceof FlashScreen){dom.addClass(elements.video,"hidden")}else if(screen instanceof TagScreen){if(dom.hasClass(elements.video,"hidden")){dom.removeClass(elements.video,"hidden")}}});dispatcher.add(Spieler.events.SCREENDESTROY,function(){if(screen&&screen.isDestroyed()){screen=null}});function initPlugins(){if(typeof config.plugins==="object"){for(var plugin in config.plugins){if(config.plugins[plugin]){if(Spieler.plugins[plugin]){try{Spieler.plugins[plugin](self,elements,config.plugins[plugin])}catch(e){console.error("Spieler: failed to initialize plugin: "+plugin,e)}}else{console.warn("Spieler: plugin not loaded: "+plugin)}}}}}initPlugins();createUI(this);if(resources&&(config.nativeControls||config.basicUi)){state.posterClicked=false}if(config.poster){showPoster()}if(!config.poster&&resources&&state.playing){init(resources)}var networkStatus=true;var networkTimer=setInterval(function(){if(navigator.onLine==false&&networkStatus==true){console.log("OFFLINE");dispatcher.dispatch(Spieler.events.OFFLINE)}networkStatus=navigator.onLine},1e3);benchmark.loaded=(new Date).getTime();console.info("loaded "+(benchmark.loaded-benchmark.start)+"ms")};var mainCSS;mainCSS=".ppMain { position: relative; background-color: #aaa; width: 100%; height: 100%;}.ppUi { pointer-events: none;}.ppUi.active { pointer-events: auto;}.ppView { position: absolute; width: 100%; height: 100%; top:0px; left: 0px; background-color: #000;}.ppView video { position: absolute; width: 100%; height: 100%;}.ppView video.hidden { width: 1px; height: 1px; position : absolute; z-index : -1;}.ppView video:-webkit-full-screen { width: 100%; height: 100%;}.ppView video:-moz-full-screen { width: 100%; height: 100%;}.ppView video:-ms-full-screen { width: 100%; height: 100%;}.ppView video:-o-full-screen { width: 100%; height: 100%;}.ppView video:full-screen { width: 100%; height: 100%;}.ppView .backcover,.ppView .ppVideoClick{ position: absolute; top: 0px; left: 0px; bottom: 3px; right: 0px;}.ppView .ppVideoClick{ cursor : pointer; z-index:10;}.ppView .ppVideoClick.hidden{ display : none;}.ppView .backcover{ display : none;}.ppView pre { color: #f00}.ppMain.ad-clickthrough { cursor: pointer;}.ppMain.ad-clickthrough .ppVideoClick{ display : none;}.ppMain .ppAdContainer { position: absolute; top: 0; right: 0; left: 0; bottom: 0;}.ppMain .ppAdContainer.hidden { display: none;}.ppMain.ad-clickthrough .ppUi { pointer-events: none !important;}/* Add a black background for the VPAID player, so the content video behind * doesn't appear between ads. see PLAY-291 */.ppMain.ad-flash .ppView .backcover { display : block; background: black;}.ppAdContainer { background: none !important; }.ppMain.flashblockdetector .fbd-swf { position: absolute; left: 0; right: 0; z-index: 2; width: 100%; height: 100%;}.ppMain.flashblockdetector .fbd-swf.hidden { visibility: hidden; display: block !important; /* we have to fight Bootstrap's .hidden definition, * which defines this with !important :/ */}/* * Temporary workaround - TODO: find another way that does not sacrifice * performance */.ppMain.backgroundHack.ad-clickthrough .ppUi { background-color: rgba(0, 0, 0, 0);}body.ie8 .ppMain{ width : 100%; height : 100%;}";var initDOM=function(element){if(Spieler.browser.is.ie!==false&&Spieler.browser.is.ie<=8){dom.addClass(document.body,"ie8")}var r={};dom.addCSS(mainCSS,true);r.main=document.createElement("div");r.main.className="ppMain";element.appendChild(r.main);element=r.main;r.view=document.createElement("div");r.view.className="ppView";element.appendChild(r.view);var video=document.createElement("video");utils.resetVideoElement(video);r.view.appendChild(video);r.video=video;var videoBackCover=document.createElement("div");videoBackCover.className="backcover";r.view.appendChild(videoBackCover);r.videoBackCover=videoBackCover;r.ui=document.createElement("div");r.ui.className="ppUi";element.appendChild(r.ui);return r};Spieler.flash={};Spieler.flash.dispatch=function(upid,event,data){if(instances[upid]){instances[upid].instance.dispatcher.dispatch(event,data)}};var buildNumber="Debug";buildNumber="1.26.0 - Lajos Meszaros.master.35085b690f3";Spieler.buildNumber=buildNumber;Spieler.console=new Logger("nothing");Spieler.events={PLAY:"PLAY",PLAYING:"PLAYING",PAUSE:"PAUSE",PAUSED:"PAUSED",END:"END",ALMOSTENDED:"ALMOSTENDED",FULLSCREEN:"FULLSCREEN",FULLSCREENERROR:"FULLSCREENERROR",GETSIZE:"GETSIZE",TIMEUPDATE:"TIMEUPDATE",ERROR:"ERROR",DURATIONCHANGE:"DURATIONCHANGE",QUALITY:"QUALITY",UNSUPPORTEDFORMAT:"UNSUPPORTEDFORMAT",VOLUMECHANGE:"VOLUMECHANGE",MUTEDCHANGE:"MUTEDCHANGE",DESTROY:"DESTROY",MEDIACHANGE:"MEDIACHANGE",SCREENDESTROY:"SCREENDESTROY",PASSIVESTATECHANGED:"PASSIVESTATECHANGED",OFFLINE:"OFFLINE",POSTCLIPDONE:"POSTCLIPDONE"};Spieler.path="/";var scripts=document.getElementsByTagName("script");for(var c=0;c<scripts.length;c++){var index=scripts[c].src.toLowerCase().indexOf("ng-spieler.js");if(index===-1){index=scripts[c].src.toLowerCase().indexOf("spieler.js")}if(index!==-1){Spieler.path=scripts[c].src.substr(0,index);Spieler.path=Spieler.path.substr(0,Spieler.path.lastIndexOf("/")+1);var pathWithoutProtocol=Spieler.path.split("//")[1];if(pathWithoutProtocol.indexOf("/")==pathWithoutProtocol.lastIndexOf("/")){Spieler.path+="spieler/"}break}}Spieler.browser=new Browser;Spieler.plugins={};window.Spieler=Spieler;if(Spieler.browser.is.smartphone&&!Spieler.browser.is.firefox){Spieler.userInteraction=false;var uiTimeout=null;dom.on(window,"click",function(){Spieler.userInteraction=true;if(uiTimeout!==null){clearTimeout(uiTimeout)}uiTimeout=setTimeout(function(){Spieler.userInteraction=false;uiTimeout=null},1e3)},true)}else{Spieler.userInteraction=null}})(window);(function(){"use strict";var P="Spieler AdBlockDetector: ";var TEST_URL=Spieler.path+"ads.js";var LIVERAIL_TEST_URL=utils.isHTTPS(document.location)?"https://cdn-static-secure.liverail.com/js/handshake.html":"http://cdn-static.liverail.com/js/handshake.html";Spieler.plugins.adBlockDetector=function(spieler,elements,config){if(!config){return}function dispatchResult(result){if(result){console.log(P+"Adblocker detected.");spieler.dispatcher.dispatch(Spieler.plugins.adBlockDetector.events.HASADBLOCK)}else{console.log(P+"No adblocker detected.");spieler.dispatcher.dispatch(Spieler.plugins.adBlockDetector.events.NOADBLOCK)}spieler.dispatcher.dispatch(Spieler.plugins.adBlockDetector.events.ADBLOCK,result)}if(Spieler.plugins.adBlockDetector.result!==null){setTimeout(function(){dispatchResult(Spieler.plugins.adBlockDetector.result)},0)}else{probe(dispatchResult,config.timeout||5e3)}spieler.hooks.add("pre-init",function(data,callback){if(self.result!==null){data.configOverrides.isAdBlockerDetected=self.result;callback(null,data)}else{console.log(P+"delaying playback until we have a result");spieler.dispatcher.add(self.events.ADBLOCK,function(evt,result_data){data.configOverrides.isAdBlockerDetected=result_data;callback(null,data)})}},"adblockdetector",true)};var self=Spieler.plugins.adBlockDetector;self.events={ADBLOCK:"ADBLOCKDETECTOR.ADBLOCK",HASADBLOCK:"ADBLOCKDETECTOR.HASADBLOCK",NOADBLOCK:"ADBLOCKDETECTOR.NOADBLOCK"};self.result=null;function probe(callback,timeout){(function(){console.log(P+"probing LiveRail iframe");var origin=LIVERAIL_TEST_URL.replace("/js/handshake.html","");var frameTimeout,classTimeout;var iframe=document.createElement("IFRAME");iframe.style.display="none";iframe.src=LIVERAIL_TEST_URL;function clear(){clearTimeout(frameTimeout);clearTimeout(classTimeout);dom.off(window,"message",onMessage)}function onMessage(e){if(e.origin!==origin){return}clear();console.log(P+"message received, not blocked");self.result=false;if(callback){callback(false)}}dom.on(iframe,"load",function(){dom.on(window,"message",onMessage);frameTimeout=setTimeout(function(){console.log(P+"LiveRail probing timed out, assuming it's blocked");self.result=true;document.body.removeChild(iframe);clear();if(callback){callback(true)}},5e3);iframe.contentWindow.postMessage("hello",origin)});if(document.body){document.body.appendChild(iframe)}else{dom.on(document,"readystatechange",function(){if(document.readyState==="interactive"||document.readyState==="complete"){document.body.appendChild(iframe)}})}classTimeout=setTimeout(function(){if(iframe.className.length){console.log(P+"LiveRail iframe has a suspicious class, assuming it's blocked");self.result=true;clear();if(callback){callback(true)}}},1e3)})()}})();(function(){"use strict";Spieler.plugins.dfp=function(spieler,elements,config){var P="Spieler DFP: ";var imaSdkUrl="//imasdk.googleapis.com/js/sdkloader/ima3.js";var adBuffer;var adBlockDetected=false;function loadImaSdk(){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.type="text/javascript";script.src=imaSdkUrl;script.onreadystatechange=function(){if(script.readyState==="loaded"){initPlugin()}};script.onerror=function(){adBlockDetected=true;initPlugin()};script.onload=function(){initPlugin()};head.appendChild(script)}if(config){spieler.hooks.add("pre-init",handlePreinit,"dfp-preroll");spieler.hooks.add("post-clip",handlePostclip,"dfp-postroll");
loadImaSdk()}var useFlash=false;function hideUI(){dom.addClass(elements.main,"ad-clickthrough");if(useFlash){dom.addClass(elements.main,"ad-flash")}}function showUI(){dom.removeClass(elements.main,"ad-clickthrough");dom.removeClass(elements.main,"ad-flash")}function hideAd(){dom.addClass(adContainer,"hidden")}function showAd(){dom.removeClass(adContainer,"hidden")}function hideAd(){dom.addClass(adContainer,"hidden")}function showAd(){dom.removeClass(adContainer,"hidden")}var videoContent;var adContainer;var adDisplayContainer;var adsManager;var adsLoader;var currentHookCallback,currentHookData;var currentPosition=null;var adsLoaded=false;var contentInitialized=false;function initPlugin(){console.log(P,"initPlugin",config);videoContent=elements.view.querySelector("video");adContainer=document.createElement("div");adContainer.className="ppAdContainer";elements.view.appendChild(adContainer);hideAd();if(adBlockDetected===false){google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE);adDisplayContainer=new google.ima.AdDisplayContainer(adContainer,videoContent);initAdsLoader()}spieler.dfp={triggerMidroll:triggerMidroll,stop:stop,getCurrentPosition:function(){return adBlockDetected===false?currentPosition:0},resume:function(){if(adBlockDetected===false){adsManager.resume();hideUI()}}};spieler.dispatcher.dispatch(events.READY)}function addSpielerListeners(){spieler.dispatcher.add(Spieler.events.PLAY,onPlay);spieler.dispatcher.add(Spieler.events.PAUSE,onPause);spieler.dispatcher.add(Spieler.events.VOLUMECHANGE,onVolumeChange);spieler.dispatcher.add(Spieler.events.MUTEDCHANGE,onMutedChange);spieler.dispatcher.add(Spieler.events.MEDIACHANGE,onMediaChange)}function removeSpielerListeners(){spieler.dispatcher.remove(Spieler.events.PLAY,onPlay);spieler.dispatcher.remove(Spieler.events.PAUSE,onPause);spieler.dispatcher.remove(Spieler.events.VOLUMECHANGE,onVolumeChange);spieler.dispatcher.remove(Spieler.events.MUTEDCHANGE,onMutedChange);spieler.dispatcher.remove(Spieler.events.MEDIACHANGE,onMediaChange)}function isValidAdDefinition(param){return typeof param==="string"||Array.isArray(param)&&param.length}function handlePreinit(data,callback){if(adBlockDetected){callback()}function run(){if(spieler.currentTime>0)return;console.log(P,"handlePreinit",data);spieler.changePassiveState(true);currentHookCallback=callback;currentHookData=data;currentPosition=0;adDisplayContainer.initialize();videoContent.src=Spieler.path+"/assets/dummyvideo.mp4";videoContent.addEventListener("loadedmetadata",onVideoContentMetaData);videoContent.load();if(data.resources.metadata&&data.resources.metadata.dfp){config=data.resources.metadata.dfp}if(!config.parameters)config.parameters={};initUseFlash(data);config.parameters.video_flash=config.parameters.video_flash!==undefined?config.parameters.video_flash:useFlash;if(isValidAdDefinition(config.preroll)){requestAds(config.preroll)}else{currentPosition=null;currentHookCallback=null;spieler.changePassiveState(false);callback()}}if(adsLoader){run()}else{spieler.dispatcher.addOnce(events.READY,run)}}function handlePostclip(data,callback){if(adBlockDetected){callback()}if(currentPosition!==null)return;console.log(P,"handlePostclip",data);currentHookCallback=callback;currentHookData=data;currentPosition=100;initUseFlash();config.parameters.video_flash=config.parameters.video_flash!==undefined?config.parameters.video_flash:useFlash;if(isValidAdDefinition(config.postroll)){requestAds(config.postroll)}else{callback()}}function onVideoContentMetaData(){videoContent.removeEventListener("loadedmetadata",onVideoContentMetaData);contentInitialized=true;startAds()}function initAdsLoader(){adsLoader=new google.ima.AdsLoader(adDisplayContainer);adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,onAdLoaded,false);adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,onAdError,false)}function onAdError(adErrorEvent){console.log(P,"onAdError",adErrorEvent.getError());if(adBuffer.length){requestNextAd();return}if(adsManager){adsManager.destroy()}spieler.dispatcher.dispatch(events.ERROR,adErrorEvent);spieler.dispatcher.dispatch(events.END,{position:currentPosition});showUI();hideAd();if(currentPosition===0&&config.sting){currentPosition=1;requestAds(config.sting);return}spieler.changePassiveState(false);removeSpielerListeners();currentPosition=null;if(currentHookCallback){currentHookCallback(null,currentHookData);currentHookCallback=null}else{spieler.resume()}}var useFlash;function initUseFlash(data){useFlash=Spieler.browser.has.flash();if(data&&data.configOverrides&&data.configOverrides.denyFlash===true||spieler&&spieler._configOverrides&&spieler._configOverrides.denyFlash===true){useFlash=false}}function encodeCustomParameters(params){var custParams="";for(var key in params){var value=params[key];if(Array.isArray(value))value=value.join(",");custParams+=key+"="+value+"&"}if(custParams.length>0){custParams=custParams.substr(0,custParams.length-1);custParams="&cust_params="+encodeURIComponent(custParams)}return custParams}var pod=1;function requestAds(adTags){spieler.changePassiveState(true);adBuffer=Array.isArray(adTags)?adTags:[adTags];if(adBuffer.length){requestNextAd()}}function requestNextAd(){var adTag=adBuffer.shift();if(config.parameters){adTag=adTag+encodeCustomParameters(config.parameters)}adTag=adTag+"&pod="+pod++;console.log(P,"adTag",adTag);var adsRequest=new google.ima.AdsRequest;adsRequest.adTagUrl=adTag;adsRequest.linearAdSlotWidth=640;adsRequest.linearAdSlotHeight=400;adsRequest.nonLinearAdSlotWidth=640;adsRequest.nonLinearAdSlotHeight=150;adsLoader.requestAds(adsRequest)}function onAdLoaded(adsManagerLoadedEvent){console.log(P,"onAdLoaded");spieler.dispatcher.dispatch(events.LOAD,{position:currentPosition});spieler.dispatcher.dispatch(Spieler.events.GETSIZE,{width:adContainer.offsetWidth,height:adContainer.offsetHeight});hideUI();showAd();var adsRenderingSettings=new google.ima.AdsRenderingSettings;adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=true;adsManager=adsManagerLoadedEvent.getAdsManager(videoContent,adsRenderingSettings);adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,onAdError);adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,onAdStarted);adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,onAdStopped);adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,onAdPaused);adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,onAdPlaying);adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,onAdVolumeChange);adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,onAdVolumeMuted);adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,onAdClicked);adsLoaded=true;adsManager.setVolume(spieler.muted()?0:spieler.volume());startAds();spieler.dispatcher.dispatch(Spieler.events.PLAY,{feedback:true});spieler.dispatcher.dispatch(Spieler.events.PLAYING);addSpielerListeners();spieler.dispatcher.add(Spieler.events.FULLSCREEN,onFullscreenChange)}var lastAdWidth,lastAdHeight;function startAds(){console.log(P,"startAds");if(!adsLoaded){return}if(!contentInitialized){return}try{adsManager.init(adContainer.offsetWidth,adContainer.offsetHeight,google.ima.ViewMode.NORMAL);lastAdWidth=adContainer.offsetWidth;lastAdHeight=adContainer.offsetHeight;adsManager.start();restartResizeInterval()}catch(adError){onAdError(adError)}}function onMediaChange(){removeAdsManagerListener()}function removeAdsManagerListener(){if(adsManager){adsManager.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,onAdError);adsManager.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,onAdStarted);adsManager.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,onAdStopped);adsManager.removeEventListener(google.ima.AdEvent.Type.PAUSED,onAdPaused);adsManager.removeEventListener(google.ima.AdEvent.Type.RESUMED,onAdPlaying);adsManager.removeEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,onAdVolumeChange);adsManager.removeEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,onAdVolumeMuted);adsManager.removeEventListener(google.ima.AdEvent.Type.CLICK,onAdClicked)}}var onPlayCalled=false;function onPlay(){if(onAdPlayingCalled){onAdPlayingCalled=false}else{onPlayCalled=true;adsManager.resume();spieler.dispatcher.dispatch(Spieler.events.PLAYING)}}var playState="paused";var onPauseCalled=false;function onPause(){if(onAdPausedCalled){onAdPausedCalled=false}else{onPauseCalled=true;adsManager.pause();playState="paused";showUI();spieler.dispatcher.dispatch(Spieler.events.PAUSED)}}function onVolumeChange(){if(adsManager&&currentPosition!==null){var vol=spieler.muted()?0:spieler.volume();if(vol!=adsManager.getVolume()){console.log(P+"setting dfp volume to",vol);adsManager.setVolume(vol)}}}function onMutedChange(){if(adsManager&&currentPosition!==null){adsManager.setVolume(spieler.muted()?0:spieler.volume())}}function onFullscreenChange(e,data){console.log(P,"onFullscreenChange",data);if(data.enter){clearInterval(resizeInterval);var r=1;adsManager.resize(screen.width*r,screen.height*r,google.ima.ViewMode.FULLSCREEN)}else{adsManager.resize(adContainer.offsetWidth,adContainer.offsetHeight,google.ima.ViewMode.NORMAL);restartResizeInterval()}}var resizeInterval;function restartResizeInterval(){if(resizeInterval)clearInterval(resizeInterval);resizeInterval=setInterval(function(){if(adContainer.offsetWidth!=lastAdWidth||adContainer.offsetHeight!=lastAdHeight){adsManager.resize(adContainer.offsetWidth,adContainer.offsetHeight,google.ima.ViewMode.NORMAL);lastAdWidth=adContainer.offsetWidth;lastAdHeight=adContainer.offsetHeight}},200)}function onAdStarted(){console.log(P,"adStarted")}function onAdStopped(){console.log(P,"adStopped");if(adBuffer.length){requestNextAd();return}if(currentPosition===0&&config.sting){currentPosition=1;requestAds(config.sting);return}showUI();hideAd();spieler.changePassiveState(false);removeSpielerListeners();spieler.dispatcher.dispatch(events.END,{position:currentPosition});currentPosition=null;if(currentHookCallback){currentHookCallback(null,currentHookData);currentHookCallback=null}}var onAdPausedCalled=false;function onAdPaused(){console.log(P+"AdPaused");spieler.dispatcher.dispatch(events.PAUSED,{position:currentPosition});if(onPauseCalled){onPauseCalled=false}else{onAdPausedCalled=true;spieler.dispatcher.dispatch(Spieler.events.PAUSE,{feedback:true});spieler.dispatcher.dispatch(Spieler.events.PAUSED)}}var onAdPlayingCalled=false;function onAdPlaying(){console.log(P+"AdPlaying");playState="playing";hideUI();spieler.dispatcher.dispatch(events.RESUMED,{position:currentPosition});if(onPlayCalled){onPlayCalled=false}else{onAdPlayingCalled=true;spieler.dispatcher.dispatch(Spieler.events.PLAY,{feedback:true});spieler.dispatcher.dispatch(Spieler.events.PLAYING)}}function onAdVolumeChange(){console.log(P,"onAdVolumeChanged");var adVolume=adsManager.getVolume();if(adVolume!=0&&spieler.volume()!=adVolume){console.log(P+"setting framework volume to",adVolume);spieler.volume(adVolume)}}function onAdVolumeMuted(){console.log(P,"onAdVolumeMuted");if(!spieler.muted()){console.log(P+"setting framework muted to true");spieler.muted(true)}}function onAdClicked(e){console.log(P,"onAdClicked",e);if(playState="playing"){adsManager.pause();showUI()}else{adsManager.resume();hideUI()}}function triggerMidroll(midroll){if(adBlockDetected===true){return}var ad=midroll||config.midroll;if(isValidAdDefinition(ad)){console.log(P,"triggerMidroll",ad);spieler.dispatcher.addOnce(events.END,function(){console.log("resume after midroll");currentPosition=null;spieler.resume()});currentPosition=50;spieler.pause();initUseFlash();config.parameters.video_flash=config.parameters.video_flash!==undefined?config.parameters.video_flash:useFlash;requestAds(ad)}}function stop(){if(adBlockDetected===true){return}if(currentPosition!==null){adsManager.stop();spieler.resume()}else{throw new Error("no advertisement in progress")}}};var events=Spieler.plugins.dfp.events={READY:"DFP.READY",ERROR:"DFP.ERROR",LOAD:"DFP.LOAD",END:"DFP.END",RESUMED:"DFP.RESUMED",PAUSED:"DFP.PAUSED"}})();(function(){"use strict";var P="Spieler FlashBlockDetector: ";var dispatcher=new Dispatcher;var result=null;var events;Spieler.plugins.flashBlockDetector=function(spieler,elements,config){if(Spieler.browser.is.smartphone||Spieler.browser.is.safari){console.log(P+"Flash is unsupported on all mobile and on apple devices in general, skipping FlashBlockDetector init.");return}var timer;var SWF_URL=Spieler.path+"swf/spieler.detect.swf";function load(){console.log(P+"loading dummy swf with "+(config.timeout||5e3)+"ms timeout");spieler.dispatcher.dispatch(events.WAITING);var fParams={wmode:"transparent",allowscriptaccess:"always"};var fAttrs={"class":"fbd-swf"+(!Spieler.browser.is.ie?" hidden":"")};var obj=utils.embedFlash(SWF_URL,fParams,fAttrs);timer=(new Date).getTime();elements.ui.appendChild(obj);dom.addClass(elements.main,"flashblockdetector");return obj}function dispatchResult(result){spieler.dispatcher.dispatch(events.FLASHBLOCK,result);spieler.dispatcher.dispatch(result?events.HASFLASHBLOCK:events.NOFLASHBLOCK)}function onPing(){result=false;dispatchResult(result);cleanup()}function cleanup(){console.log(P+"cleaning up...");dispatcher.remove("PING",onPing);dom.removeClass(elements.main,"flashblockdetector");var t=(new Date).getTime()-timer;setTimeout(function(){if(objectElement&&objectElement.parentNode){utils.deleteFlash(objectElement)}else{var element=elements.ui.querySelector(".fbd-swf");if(element.parentNode){element.parentNode.removeChild(element)}}objectElement=null},t<1e3?1e3-t:0)}var objectElement;var timeout=config.timeout!==undefined?config.timeout:5e3;if(!Spieler.browser.has.flash()){return}spieler.hooks.add("pre-init",function(data,callback){var ret=function(){console.log(P+"unblocked playback with denyFlash: "+result);data.configOverrides.denyFlash=result;callback(null,data)};if(result!==null){ret()}else{console.log(P+"delaying playback until flashblock detection is done");spieler.dispatcher.add(events.FLASHBLOCK,ret)}},"flashblockdetector",true);dispatcher.add("PING",onPing);if(result===null){objectElement=load();window.setTimeout(function(){if(result===null){console.log(P+"timeout exceeded. No Flash.");result=true;cleanup();dispatchResult(true)}},timeout)}else{dispatchResult(result)}};Spieler.plugins.flashBlockDetector.ping=function(){console.log(P+"response recieved, Flash is enabled.");dispatcher.dispatch("PING")};Spieler.plugins.flashBlockDetector.reset=function(){result=null};events=Spieler.plugins.flashBlockDetector.events={FLASHBLOCK:"FLASHBLOCKDETECTOR.FLASHBLOCK",WAITING:"FLASHBLOCKDETECTOR.WAITING",HASFLASHBLOCK:"FLASHBLOCKDETECTOR.HASFLASHBLOCK",NOFLASHBLOCK:"FLASHBLOCKDETECTOR.NOFLASHBLOCK"}})();Spieler.plugins.googleTagManager=function(spieler,elements,config){"use strict";var dataLayer;if(typeof config==="object"){if(typeof config.dataLayerHandle==="string"){dataLayer=window[config.dataLayerHandle]}else if(typeof config.dataLayerHandle==="object"){dataLayer=config.dataLayerHandle}else{dataLayer=window.dataLayer}}if(!dataLayer){throw new Error("GTM dataLayer global is not available")}var paused=false;var lastSource=null;if(config.events&&config.events.videoLoad){spieler.dispatcher.add(Spieler.events.GETSIZE,function(e,duration){if(!spieler.media){return}if(spieler.media.active()==lastSource){return}else{lastSource=spieler.media.active()}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}var data={event:"spieler-video-load","spieler-platform":spieler.media.platform()===Media.PLATFORM.HTML5?"HTML5":"Flash","spieler-video-title":spieler.media.metadata?spieler.media.metadata.title:null,"spieler-video-id":spieler.media.metadata?spieler.media.metadata.id:null,"spieler-duration":duration,"spieler-video-type":spieler.media.metadata&&spieler.media.metadata.advertisement?"advertisement":"content"};dataLayer.push(data)})}if(config.events&&config.events.videoEnd){spieler.dispatcher.add(Spieler.events.END,function(){if(!spieler.media){return}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}dataLayer.push({event:"spieler-video-end"})})}if(config.events&&config.events.videoPause){spieler.dispatcher.add(Spieler.events.PAUSE,function(){if(!spieler.media){return}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}dataLayer.push({event:"spieler-video-pause"});paused=true})}if(config.events&&config.events.videoResume){spieler.dispatcher.add(Spieler.events.PLAY,function(){if(!spieler.media){return}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}if(!paused){return}dataLayer.push({event:"spieler-video-resume"})})}if(config.events&&config.events.videoProgress){spieler.dispatcher.add(Spieler.events.TIMEUPDATE,function(e,time){if(!spieler.media){return}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}var data={event:"spieler-video-progress","spieler-current-time":time};dataLayer.push(data)})}};Spieler.plugins.liverail=function(spieler,elements,config){"use strict";var adInProgress=false;var currentAdIndex=null;var currentLinear=null;var currentCallbacks={};var vastClient=Spieler.plugins.vastClient;var LR_VAST_URL="http://ad4.liverail.com/?LR_SCHEMA=vast2";var events=Spieler.plugins.liverail.events;var media;var currentTime;var restored;console.log("SpielerLiverail: Initializing liverail plugin with ",config);if(config.videoPositions&&config.videoPositions.indexOf(0)!==-1){spieler.hooks.add("pre-init",function(resources,callback){if(!adInProgress&&!restored){playAdverts(0,resources.metadata,null,null,callback)}else if(restored){restored=false;callback()}else{callback()}},"liverail-preroll")}if(config.videoPositions&&config.videoPositions.indexOf(100)!==-1){spieler.hooks.add("post-clip",function(resources,callback){if(!adInProgress){setTimeout(function(){playAdverts(100,resources.metadata,null,null,callback)},0)}else{callback()}},"liverail-postroll")}spieler.dispatcher.add(Spieler.events.MEDIACHANGE,function(){if(adInProgress){adInProgress=false;currentAdIndex=null;currentLinear.tracker.removeProgressCallbacks(spieler);currentLinear=null;dom.removeClass(elements.main,"ad-clickthrough");spieler.dispatcher.remove(Spieler.events.PLAY,currentCallbacks.onAdStart);spieler.dispatcher.remove(Spieler.events.END,currentCallbacks.onAdEnd);dom.off(elements.main,"click",currentCallbacks.onClick)}});function playAdverts(position,metadata,customParameters,admap,callback){var parameters={};var key;var querystring="";parameters.LR_WIDTH=elements.view.clientWidth;parameters.LR_HEIGHT=elements.view.clientHeight;if(config.publisherId){parameters.LR_PUBLISHER_ID=config.publisherId}if(config.partnerId){parameters.LR_PARTNERS=config.partnerId}if(config.tags){parameters.LR_TAGS=config.tags}if(config.customParameters){for(key in config.customParameters){parameters[key]=config.customParameters[key]}}if(config.admaps&&config.admaps[position]||admap){parameters.LR_ADMAP=config.admaps[position]||admap}else{parameters.LR_VIDEO_POSITION=position}if(metadata){if(metadata.id){parameters.LR_VIDEO_ID=metadata.id}if(metadata.title){parameters.LR_TITLE=metadata.title}if(metadata.description){parameters.LR_DESCRIPTION=metadata.description}if(metadata.liverail){for(key in metadata.liverail){parameters[key]=metadata.liverail[key]}}}else{console.warn("SpielerLiverail: metadata is missing from content video.")}if(customParameters){for(key in customParameters){parameters[key]=customParameters[key]}}for(key in parameters){querystring+="&"+key+"="+encodeURIComponent(parameters[key])}var vastUrl=LR_VAST_URL+querystring;console.log("SpielerLiverail: Requesting VAST URL "+vastUrl);vastClient(vastUrl,function(error,result){var message;if(error){if(error.xml){var liverailElements=error.xml.getElementsByTagName("liverail");if(liverailElements.length&&liverailElements[0].getAttribute("content")==="error"){message=liverailElements[0].childNodes[0].textContent;console.warn("SpielerLiverail: Liverail error: "+message)}else{console.warn("SpielerLiverail: Invalid Liverail response")}}else{message=error.message;console.warn("SpielerLiverail: vastClient error: "+message+", position: "+position)}spieler.dispatcher.dispatch(events.ERROR,{videoPosition:position,error:message});spieler.dispatcher.dispatch(events.START,{videoPosition:position,adCount:0,totalDuration:0});spieler.dispatcher.dispatch(events.END,{videoPosition:position});callback(null)}else{currentAdIndex=0;var totalDuration=0;for(var adIndex=0;adIndex<result.length;adIndex++){totalDuration+=result[adIndex].creatives.linear[0].duration}spieler.dispatcher.dispatch(events.START,{videoPosition:position,adCount:result.length,totalDuration:totalDuration});playNextLinear(result,position,function(){spieler.dispatcher.dispatch(events.END,{videoPosition:position});callback(null)})}});function playNextLinear(ads,position,callback){var currentAd=ads[currentAdIndex];if(currentAd&&currentAd.creatives&&currentAd.creatives.linear.length){console.log("SpielerLiverail: Playing ad "+(currentAdIndex+1)+" of "+ads.length);currentLinear=currentAd.creatives.linear[0];if(currentLinear.spielerMedia){currentLinear.tracker.addProgressCallbacks(spieler);currentLinear.tracker.track("impression");currentLinear.spielerMedia.metadata.adPosition=position;adInProgress=true;if(spieler.playing()){spieler.play(currentLinear.spielerMedia,true)}else{spieler.play(currentLinear.spielerMedia,true);spieler.pause()}addAdCallbacks(currentAd,function(){currentAdIndex++;playNextLinear(ads,position,callback)})}else{console.warn("SpielerLiverail: No media in creative");currentAdIndex++;playNextLinear(ads,position,callback)}}else{adInProgress=false;callback(null)}}function addAdCallbacks(ad,callback){function onClick(){spieler.pause();ad.creatives.linear[0].tracker.track("clickthrough");window.open(ad.creatives.linear[0].clickThroughURL)}function onAdStart(){console.log("SpielerLiverail: Advertisement #"+currentAdIndex+" at position "+position+" has started");dom.on(elements.main,"click",onClick);dom.addClass(elements.main,"ad-clickthrough");spieler.dispatcher.remove(Spieler.events.GETSIZE,onAdStart)}function onAdEnd(){console.log("SpielerLiverail: Advertisement #"+currentAdIndex+" at position "+position+" has ended");dom.off(elements.main,"click",onClick);dom.removeClass(elements.main,"ad-clickthrough");spieler.dispatcher.remove(Spieler.events.END,onAdEnd);currentLinear.tracker.removeProgressCallbacks(spieler);setTimeout(function(){callback(null)})}spieler.dispatcher.add(Spieler.events.GETSIZE,onAdStart);spieler.dispatcher.add(Spieler.events.END,onAdEnd);currentCallbacks.onClick=onClick;currentCallbacks.onAdStart=onAdStart;currentCallbacks.onAdEnd=onAdEnd}}function restore(){if(media!==spieler.media){console.log("SpielerLiverail: restoring content");if(media){restored=true;spieler.play(media,true);if(currentTime){spieler.dispatcher.addOnce(Spieler.events.DURATIONCHANGE,function(){spieler.currentTime(currentTime)})}}dom.off(elements.main,"click",currentCallbacks.onClick);dom.removeClass(elements.main,"ad-clickthrough");spieler.dispatcher.remove(Spieler.events.END,currentCallbacks.onAdEnd);currentLinear.tracker.removeProgressCallbacks(spieler)}adInProgress=false;currentLinear=null}function triggerMidroll(midrollConfig){if(adInProgress){throw new Error("Advertisement is already in progress")}console.log("SpielerLiverail: requesting midroll");currentTime=spieler.currentTime();media=spieler.media;if(!media){throw new Error("Spieler Liverail: illegal invocation of #triggerMidroll - no media loaded")}function onMidrollEnd(error){if(error){console.error("SpielerLiverail: failed to play midroll: ",error)}restore()}var admap=null;if(midrollConfig!=undefined&&midrollConfig.admap!=undefined){admap=midrollConfig.admap}else if(config!=undefined&&config.admaps!=undefined&&config.admaps.triggered!=undefined){admap=config.admaps.triggered}playAdverts(spieler.duration()/currentTime*100,media.metadata,config.customParameters,admap,onMidrollEnd)}function skip(){if(!adInProgress){throw new Error("No advertisement in progress")}console.log("SpielerLiverail: skipping advertisement block");spieler.dispatcher.dispatch(events.SKIP);restore()}spieler.liverail={triggerMidroll:triggerMidroll,skip:skip};console.log("SpielerLiverail: Initializing liverail plugin with ",config);if(!vastClient){throw new Error("vastClient plugin is required to use liverail")}};Spieler.plugins.liverail.events={START:"LIVERAIL.START",SKIP:"LIVERAIL.SKIP",END:"LIVERAIL.END",ERROR:"LIVERAIL.ERROR"};(function(){"use strict";var ADMANAGER_URL="http://cdn-static.liveRail.com/js/LiveRail.AdManager-1.0.js";var ADMANAGER_URL_SECURE="https://cdn-static-secure.liverail.com/js/LiveRail.AdManager-1.0.js";Spieler.plugins.liveRailVpaid=function(spieler,elements,config){var env,key,slot,liveRailVPAID,currentHookCallback,currentHookData,useFlash,isAdBlockerDetected;var currentPosition=null;var videoElement=elements.view.querySelector("video");var P="Spieler LiveRailAdManager: ";function hideUI(){dom.addClass(elements.main,"ad-clickthrough");if(useFlash){dom.addClass(elements.main,"ad-flash")}}function showUI(){dom.removeClass(elements.main,"ad-clickthrough");dom.removeClass(elements.main,"ad-flash")}function initUseFlash(data){useFlash=config.denyFlash!==true&&Spieler.browser.has.flash();if(data&&data.configOverrides&&data.configOverrides.denyFlash===true||spieler&&spieler._configOverrides&&spieler._configOverrides.denyFlash===true){useFlash=false}}function initAdBlockerDetected(data){if(data&&data.configOverrides&&data.configOverrides.isAdBlockerDetected===true||spieler&&spieler._configOverrides&&spieler._configOverrides.isAdBlockerDetected===true){isAdBlockerDetected=true}}function loadAdManager(onVPAIDLoad){var vpaidFrame,vpaidLoader;vpaidFrame=document.createElement("iframe");vpaidFrame.style.display="none";dom.on(vpaidFrame,"load",function(){vpaidLoader=vpaidFrame.contentWindow.document.createElement("script");function onVpaidLoaded(){try{liveRailVPAID=vpaidFrame.contentWindow.getVPAIDAd();liveRailVPAID.handshakeVersion("2.0");if(onVPAIDLoad){onVPAIDLoad(null,liveRailVPAID)}}catch(e){if(onVPAIDLoad){onVPAIDLoad(e)}}}dom.on(vpaidLoader,"readystatechange",function(){if(vpaidLoader.readyState==="loaded"){onVpaidLoaded()}});dom.on(vpaidLoader,"load",function(){onVpaidLoaded()});var url=utils.isHTTPS()?ADMANAGER_URL_SECURE:ADMANAGER_URL;if(Spieler.browser.is.ie!==false&&Spieler.browser.is.ie<=8){url+=(url.indexOf("?")!==-1?"&":"?")+(new Date).getTime()}vpaidLoader.src=url;vpaidFrame.contentWindow.document.body.appendChild(vpaidLoader)});document.body.appendChild(vpaidFrame)}function getEnvironmentVars(position,override){var env={};for(key in config.parameters){env[key]=config.parameters[key]}env.slot=document.createElement("div");env.slot.className="ppAdContainer";env.slot.setAttribute("data-id",Math.floor(Math.random()*1e3));elements.view.appendChild(env.slot);if(!useFlash){env.videoSlot=videoElement;env.videoSlotCanAutoPlay=true;env.LR_FORMAT_BLOCKLIST="video/x-flv;application/x-shockwave-flash"}else{env.videoSlot=videoElement;env.videoSlotCanAutoPlay=true}env.LR_VIDEO_POSITION=position+"%";for(key in override){env[key]=override[key]}return env}function addHook(position){var preroll=position===0;var postroll=position===100;if(!preroll&&!postroll){console.warn(P+"pre-defined midrolls are not supported");return}function hook(data,callback){var env;var resources=data.resources;initUseFlash(data);initAdBlockerDetected(data);if(isAdBlockerDetected==true){setTimeout(function(){spieler.dispatcher.dispatch(events.LOAD);setTimeout(function(){spieler.dispatcher.dispatch(events.ERROR);setTimeout(function(){spieler.dispatcher.dispatch(events.END)},0)},0)},0)}if(currentPosition!==null){return}function start(){env=getEnvironmentVars(position,resources.metadata&&resources.metadata.liveRailVpaid);spieler.dispatcher.remove(Spieler.events.VOLUMECHANGE,onVolumeChange);spieler.dispatcher.remove(Spieler.events.PLAY,onPlay);spieler.dispatcher.remove(Spieler.events.PAUSE,onPause);spieler.dispatcher.remove(Spieler.events.MUTEDCHANGE,onMutedChange);if(useFlash&&env.slot&&env.slot.children&&env.slot.children.length>1){for(var i=0;i<env.slot.children.length;i++){if(env.slot.children[i].children.length>0){while(env.slot.children[i].children.length){utils.deleteFlash(env.slot.children[i].children[0])}}env.slot.removeChild(env.slot.children[i])}}console.log(P+"Initializing AdManager with ",env);videoElement.style.width=env.slot.offsetWidth+"px";videoElement.style.height=env.slot.offsetHeight+"px";liveRailVPAID.initAd(env.slot.offsetWidth,env.slot.offsetHeight,"normal",600,{},env)}spieler.changePassiveState(true);currentHookCallback=callback;currentHookData=data;currentPosition=position;if(!liveRailVPAID){console.log(P+"Waiting for LiveRail AdManager...");spieler.dispatcher.addOnce(events.READY,start)}else{start()}}if(preroll){spieler.hooks.add("pre-init",function(data,callback){backup(true);spieler.dispatcher.addOnce(events.END,function(){restore()});initAdBlockerDetected(data);if(isAdBlockerDetected==true){setTimeout(function(){spieler.dispatcher.dispatch(events.LOAD);setTimeout(function(){spieler.dispatcher.dispatch(events.ERROR);setTimeout(function(){spieler.dispatcher.dispatch(events.END)},0)},0)},0)}hook(data,callback)},"liveRailVpaid-preroll")}else{spieler.hooks.add("post-clip",function(data,callback){backup(true,true);backupData.videoSrc=videoElement.src;spieler.dispatcher.addOnce(events.END,function(){if(videoElement.src!==backupData.videoSrc){videoElement.src=backupData.videoSrc}restore()});initAdBlockerDetected(data);if(isAdBlockerDetected==true){setTimeout(function(){spieler.dispatcher.dispatch(events.LOAD);setTimeout(function(){spieler.dispatcher.dispatch(events.ERROR);setTimeout(function(){spieler.dispatcher.dispatch(events.END)},0)},0)},0)}hook(data,callback)},"liveRailVpaid-postroll")}}function onAdLoaded(){console.log(P+"AdLoaded");spieler.dispatcher.dispatch(events.LOAD,{position:currentPosition});spieler.dispatcher.dispatch(Spieler.events.GETSIZE,{width:elements.view.offsetWidth,height:elements.view.offsetHeight});hideUI();liveRailVPAID.setAdVolume(spieler.muted()?0:spieler.volume());onAdVolumeChangeCalled=false;liveRailVPAID.startAd();spieler.dispatcher.dispatch(Spieler.events.PLAY,{feedback:true});spieler.dispatcher.dispatch(Spieler.events.PLAYING);spieler.dispatcher.add(Spieler.events.VOLUMECHANGE,onVolumeChange);spieler.dispatcher.add(Spieler.events.PLAY,onPlay);spieler.dispatcher.add(Spieler.events.PAUSE,onPause);spieler.dispatcher.add(Spieler.events.MUTEDCHANGE,onMutedChange);spieler.dispatcher.add(Spieler.events.FULLSCREEN,removeFixedSize)}function onAdStopped(){console.log(P+"AdStopped");showUI();utils.resetVideoElement(videoElement);console.log(P+"reset video element");var containers=elements.view.querySelectorAll(".ppAdContainer");var l=containers.length;if(l>0){while(l--){elements.view.removeChild(containers[l])}}spieler.changePassiveState(false);spieler.dispatcher.remove(Spieler.events.VOLUMECHANGE,onVolumeChange);spieler.dispatcher.remove(Spieler.events.PLAY,onPlay);spieler.dispatcher.remove(Spieler.events.PAUSE,onPause);spieler.dispatcher.dispatch(events.END,{position:currentPosition});currentPosition=null;if(currentHookCallback){currentHookCallback(null,currentHookData);currentHookCallback=null}}function onAdError(error,code){console.error(P+"AdError",error,code);spieler.dispatcher.dispatch(events.ERROR,error);if(config.haltOnError){spieler.changePassiveState(false);currentPosition=null;currentHookCallback(new Error(error))}else{onAdStopped()}}var onAdPausedCalled=false;function onAdPaused(){console.log(P+"AdPaused");spieler.dispatcher.dispatch(events.PAUSED,{position:currentPosition});if(onPauseCalled){onPauseCalled=false}else{onAdPausedCalled=true;spieler.dispatcher.dispatch(Spieler.events.PAUSE,{
feedback:true});spieler.dispatcher.dispatch(Spieler.events.PAUSED)}}function onAdStarted(){console.log(P+"AdStarted");hideUI();removeFixedSize()}var onAdPlayingCalled=false;function onAdPlaying(){console.log(P+"AdPlaying");hideUI();spieler.dispatcher.dispatch(events.RESUMED,{position:currentPosition});if(onPlayCalled){onPlayCalled=false}else{onAdPlayingCalled=true;spieler.dispatcher.dispatch(Spieler.events.PLAY,{feedback:true});spieler.dispatcher.dispatch(Spieler.events.PLAYING)}}var odAdMuteChangeCalled=false;function onMutedChange(){if(odAdMuteChangeCalled){odAdMuteChangeCalled=false}else if(liveRailVPAID&&currentPosition!==null){console.log("onMutedChange 1. Vol is: ",spieler.volume()," isMuted: ",spieler.muted());odAdMuteChangeCalled=true;liveRailVPAID.setAdVolume(spieler.muted()?0:spieler.volume());setTimeout(resetVolumeGuards,0)}}var onVolumeChangeCalled=false;function resetVolumeGuards(){onVolumeChangeCalled=false;onAdVolumeChangeCalled=false;odAdMuteChangeCalled=false}function onVolumeChange(){if(onAdVolumeChangeCalled){onAdVolumeChangeCalled=false}else if(liveRailVPAID&&currentPosition!==null){var vol=spieler.muted()?0:spieler.volume();console.log(P+"setting liverail volume to",vol);onVolumeChangeCalled=true;liveRailVPAID.setAdVolume(vol);setTimeout(resetVolumeGuards,0)}}var onAdVolumeChangeCalled=false;function onAdVolumeChange(){if(onVolumeChangeCalled){onVolumeChangeCalled=false}else{onAdVolumeChangeCalled=true;if(liveRailVPAID.getAdVolume()>0){console.log(P+"setting framework volume to",liveRailVPAID.getAdVolume());spieler.muted(false);spieler.volume(backupData!==null?backupData.volume:liveRailVPAID.getAdVolume())}else{console.log(P+"setting framework muted to true");spieler.muted(true)}setTimeout(resetVolumeGuards,0)}}var onPlayCalled=false;function onPlay(){if(onAdPlayingCalled){onAdPlayingCalled=false}else{onPlayCalled=true;liveRailVPAID.resumeAd();spieler.dispatcher.dispatch(Spieler.events.PLAYING)}}var onPauseCalled=false;function onPause(){if(onAdPausedCalled){onAdPausedCalled=false}else{onPauseCalled=true;liveRailVPAID.pauseAd();spieler.dispatcher.dispatch(Spieler.events.PAUSED)}}function removeFixedSize(){videoElement.removeAttribute("style")}function stop(){if(currentPosition!==null){liveRailVPAID.stopAd();liveRailVPAID.stopAd()}else{throw new Error("no advertisement in progress")}}function kill(){var adContainers=elements.view.querySelectorAll(".ppAdContainer");if(adContainers.length>0){var last=adContainers[adContainers.length-1];var flashOfLast=last.querySelector("object");if(flashOfLast){utils.deleteFlash(flashOfLast)}elements.view.removeChild(last)}}spieler.dispatcher.add(Spieler.events.MEDIACHANGE,function(event,data){spieler.changePassiveState(false);if(data!=="vpaid-midroll")kill();currentPosition=null});var backupData=null;function backup(dontSaveTime,dontSaveMedia){backupData={volume:spieler.volume(),muted:spieler.muted(),quality:spieler.quality(),abs:spieler.abs()};if(!dontSaveTime){backupData.currentTime=spieler.currentTime()}if(!dontSaveMedia){backupData.media=spieler.media}}function restore(){if(backupData!==null){var onDurationChange=function(){if(backupData===null){spieler.dispatcher.remove(Spieler.events.DURATIONCHANGE,onDurationChange);return}if(backupData.abs===true){spieler.abs(backupData.abs)}else if(backupData.quality!==undefined&&spieler.getPassiveState()==true){spieler.quality(backupData.quality)}spieler.dispatcher.remove(Spieler.events.DURATIONCHANGE,onDurationChange);spieler.currentTime(backupData.currentTime);backupData=null};spieler.dispatcher.add(Spieler.events.DURATIONCHANGE,onDurationChange);if(backupData.media){spieler.play(backupData.media,true,true)}backupData.muted=liveRailVPAID.getAdVolume()>0?false:true;spieler.volume(backupData.volume);spieler.muted(backupData.muted)}}function triggerMidroll(parameters){backup();var env,param,initialParams;spieler.dispatcher.dispatch(Spieler.events.MEDIACHANGE,"vpaid-midroll");function start(){spieler.dispatcher.addOnce(events.END,function(){console.log("resume after midroll");restore()});if(useFlash===undefined){initUseFlash()}initialParams=getEnvironmentVars(50);if(parameters){env={};for(param in initialParams){env[param]=initialParams[param]}for(param in parameters){env[param]=parameters[param]}}else{env=initialParams}spieler.changePassiveState(true);currentPosition=50;spieler.pause();console.log(P+"Initializing AdManager with ",env);videoElement.style.width=env.slot.offsetWidth+"px";videoElement.style.height=env.slot.offsetHeight+"px";liveRailVPAID.initAd(env.slot.offsetWidth,env.slot.offsetHeight,"normal",600,{},env)}if(!liveRailVPAID){console.log(P+"Waiting for LiveRail AdManager...");spieler.dispatcher.addOnce(events.READY,start)}else{start()}}loadAdManager(function(err){if(err){console.error(P+"Failed to intitalize LiveRail AdManager"+" - ads will be disabled.",err);spieler.dispatcher.dispatch(events.ERROR,err)}else{console.log(P+"LiveRail AdManager loaded. ",liveRailVPAID);liveRailVPAID.subscribe(onAdLoaded,"AdLoaded");liveRailVPAID.subscribe(onAdStopped,"AdStopped");liveRailVPAID.subscribe(onAdError,"AdError");liveRailVPAID.subscribe(onAdPaused,"AdPaused");liveRailVPAID.subscribe(onAdStarted,"AdStarted");liveRailVPAID.subscribe(onAdPlaying,"AdPlaying");liveRailVPAID.subscribe(onAdVolumeChange,"AdVolumeChange");liveRailVPAID.subscribe(function(message){console.log(P+"AdLog: "+message)});spieler.dispatcher.dispatch(events.READY)}});if(config.videoPositions){config.videoPositions.forEach(function(e){addHook(e)})}spieler.liveRailVpaid={triggerMidroll:triggerMidroll,stop:stop}};var events=Spieler.plugins.liveRailVpaid.events={READY:"LIVERAILVPAID.READY",ERROR:"LIVERAILVPAID.ERROR",LOAD:"LIVERAILVPAID.LOAD",END:"LIVERAILVPAID.END",RESUMED:"LIVERAILVPAID.RESUMED",PAUSED:"LIVERAILVPAID.PAUSED"}})();Spieler.plugins.vastClient=function(url,callback){"use strict";function VASTTracker(trackings,clickTrackings,impressions){var self=this;var start=false;var pause=false;var firstQuartile=false;var midpoint=false;var thirdQuartile=false;var complete=false;var mute=false;var unmute=false;var duration;function ping(url){url+=(url.indexOf("?")!==-1?"&":"?")+"_="+Date.now();console.log("Spieler VASTClient Tracker: hit "+url);var pingElement=document.createElement("IMG");pingElement.src=url}function onGetsize(){self.track("creativeView");self.track("start")}function onPlay(){self.track("resume")}function onPause(){pause=true;self.track("pause")}function onDuration(event,value){duration=value}function onTimeupdate(event,value){var position=value/duration;if(!firstQuartile&&position>=.25){firstQuartile=true;self.track("firstQuartile")}else if(!midpoint&&position>=.5){midpoint=true;self.track("midpoint")}else if(!thirdQuartile&&position>=.75){thirdQuartile=true;self.track("thirdQuartile")}}function onVolumeChange(event,value){if(!mute&&value===0){mute=true;unmute=false;self.track("mute")}else if(!unmute&&value>0){mute=false;unmute=true;self.track("unmute")}}function onFullscreen(){self.track("fullscreen")}function onEnd(){complete=true;self.track("complete")}function onDestroy(){self.track("close")}this.track=function track(event){var hitCount;if(event==="clickthrough"){for(hitCount=0;hitCount<clickTrackings.length;hitCount++){ping(clickTrackings[hitCount])}}else if(event==="impression"){hitCount=0;for(var key in impressions){ping(impressions[key]);hitCount++}}else{if(trackings[event]){hitCount=0;for(var key in trackings[event]){ping(trackings[event][key]);hitCount++}}else{hitCount=0}}console.log("Spieler VASTClient Tracker: Tracked event "+event+", hit "+hitCount+" url(s)")};this.addProgressCallbacks=function(spieler){spieler.dispatcher.add(Spieler.events.GETSIZE,onGetsize);spieler.dispatcher.add(Spieler.events.PAUSE,onPause);spieler.dispatcher.add(Spieler.events.DURATIONCHANGE,onDuration);spieler.dispatcher.add(Spieler.events.TIMEUPDATE,onTimeupdate);spieler.dispatcher.add(Spieler.events.VOLUMECHANGE,onVolumeChange);spieler.dispatcher.add(Spieler.events.FULLSCREEN,onFullscreen);spieler.dispatcher.add(Spieler.events.DESTROY,onDestroy);spieler.dispatcher.add(Spieler.events.END,onEnd);setTimeout(function(){spieler.dispatcher.add(Spieler.events.PLAY,onPlay)},0)};this.removeProgressCallbacks=function(spieler){spieler.dispatcher.remove(Spieler.events.GETSIZE,onGetsize);spieler.dispatcher.remove(Spieler.events.PLAY,onPlay);spieler.dispatcher.remove(Spieler.events.PAUSE,onPause);spieler.dispatcher.remove(Spieler.events.DURATIONCHANGE,onDuration);spieler.dispatcher.remove(Spieler.events.TIMEUPDATE,onTimeupdate);spieler.dispatcher.remove(Spieler.events.VOLUMECHANGE,onVolumeChange);spieler.dispatcher.remove(Spieler.events.FULLSCREEN,onFullscreen);spieler.dispatcher.remove(Spieler.events.DESTROY,onDestroy);spieler.dispatcher.remove(Spieler.events.END,onEnd)}}function deepExtend(destination,source){for(var property in source){if(property==="spielerMedia"){destination[property]=source[property]}else if(source[property]instanceof Array&&property.match(/Quartile|midpoint|complete|mute|fullscreen|start|clickTrackings/)){if(destination[property]===undefined){destination[property]=[]}destination[property]=source[property].concat(destination[property])}else if(source[property]&&source[property]instanceof Object){destination[property]=destination[property]||{};deepExtend(destination[property],source[property])}else{destination[property]=source[property]}}return destination}var getResource=function(callback){var xmlhttp;var retObj;if(window.XDomainRequest){xmlhttp=new XDomainRequest}else if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}var async=!Spieler.browser.is.smartphone||Spieler.browser.is.iosWebView;xmlhttp.open("GET",url,async);if(window.XDomainRequest){xmlhttp.onprogress=function(){};xmlhttp.ontimeout=function(){};xmlhttp.onerror=function(){};xmlhttp.timeout=0;xmlhttp.onload=function(){var xml;var parser;try{parser=new DOMParser;xml=parser.parseFromString(xmlhttp.responseText,"application/xml");retObj=parseAds(xml.documentElement.parentNode)}catch(error){callback(error);return}callback(null,retObj)};xmlhttp.onerror=function(){callback(new Error("Request failed"),null)};window.setTimeout(function(){xmlhttp.send()},500)}else{xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===4){if(xmlhttp.status===200){try{retObj=parseAds(xmlhttp.responseXML)}catch(error){callback(error);return}callback(null,retObj)}else{callback(new Error("Request failed: "+xmlhttp.status+"/"+xmlhttp.statusText),null)}}};xmlhttp.send()}};var parseAds=function(xml){if(!xml.getElementsByTagName("VAST").length){var error=new Error("Invalid VAST response");error.xml=xml;throw error}var oneAd;var ads=xml.getElementsByTagName("Ad");if(ads.length===0){return[]}var adObjects=[];for(var a=0,adsLen=ads.length;a<adsLen;a++){oneAd=parseOneAd(ads[a]);if(oneAd!==undefined){adObjects.push(oneAd)}}return adObjects};var parseOneAd=function(source){var ad={};var wrapper=source.getElementsByTagName("Wrapper");wrapper=wrapper.length?wrapper[0]:null;var inline=source.getElementsByTagName("InLine");inline=inline.length?inline[0]:null;var tag=inline||wrapper;if(!tag){throw Error("Unsupported advertisement type")}var impressions=tag.getElementsByTagName("Impression");var creatives=tag.getElementsByTagName("Creatives")[0].getElementsByTagName("Creative");var companions;var creative;if(creatives.length===0){return}if(wrapper){ad.vastTag=wrapper.getElementsByTagName("VASTAdTagURI")[0].textContent.trim();ad.complete=false}else if(inline){ad.complete=true;ad.title=inline.getElementsByTagName("AdTitle")[0].textContent.trim();ad.description=inline.getElementsByTagName("Description")[0].textContent.trim()}else{console.log("Advertisement type not supported: ",source);return null}ad.impressions={};ad.creatives={linear:[],companion:[]};ad.id=source.getAttribute("id");ad.sequence=source.getAttribute("sequence");ad.error=tag.getElementsByTagName("Error");ad.error=ad.error.length?ad.error[0].textContent.trim():null;ad.system={name:tag.getElementsByTagName("AdSystem")[0].textContent.trim(),version:tag.getElementsByTagName("AdSystem")[0].getAttribute("version")};for(var i=0,impLen=impressions.length;i<impLen;i++){var val=impressions[i].textContent.trim();if(val.length){ad.impressions[impressions[i].getAttribute("id")]=val}}for(var c=0,creLen=creatives.length;c<creLen;c++){if(creatives[c].getElementsByTagName("Linear").length>0){creative=parseLinear(creatives[c],ad.impressions,ad.title);if(creative!==undefined){ad.creatives.linear.push(creative)}}else if(creatives[c].getElementsByTagName("Companion").length>0){companions=creatives[c].getElementsByTagName("Companion");for(var cc=0,ccomLen=companions.length;cc<ccomLen;cc++){creative=parseCompanion(creatives[c],companions[cc]);if(creative!==undefined){ad.creatives.companion.push(creative)}}}}return ad};var parseLinear=function(parsed,impressions,title){var linear=parsed.getElementsByTagName("Linear")[0];var types={"video/mp4":"mp4","video/webm":"webm","video/flv":"flv","video/x-flv":"flv","application/vnd.apple.mpegURL":"m3u8","vnd.apple.mpegURL":"m3u8","application/x-mpegurl":"m3u8"};var spielerFormat;if(linear===undefined){return}var creative={};var duration=linear.getElementsByTagName("Duration");duration=duration.length?duration[0].textContent.trim().split(":"):null;var trackings=linear.getElementsByTagName("Tracking");var videoClicks=linear.getElementsByTagName("VideoClicks")[0];var clickTrackings=videoClicks.getElementsByTagName("ClickTracking");var customClicks=videoClicks.getElementsByTagName("CustomClick");var mediaFiles=linear.getElementsByTagName("MediaFiles");mediaFiles=mediaFiles.length?mediaFiles[0].getElementsByTagName("MediaFile"):null;creative.trackings={};creative.clickTrackings=[];creative.customClicks=[];creative.media=[];if(duration){creative.duration=duration[0]*60*60+duration[1]*60+duration[2]*1}creative.clickThroughURL=videoClicks.getElementsByTagName("ClickThrough");creative.clickThroughURL=creative.clickThroughURL.length?creative.clickThroughURL[0].textContent.trim():null;creative.id=parsed.getAttribute("id");creative.sequence=parsed.getAttribute("sequence");for(var t=0,traLen=trackings.length;t<traLen;t++){var key=trackings[t].getAttribute("event");if(!creative.trackings[key]){creative.trackings[key]=[]}creative.trackings[key].push(trackings[t].textContent.trim())}for(var ct=0,ctraLen=clickTrackings.length;ct<ctraLen;ct++){creative.clickTrackings.push(clickTrackings[ct].textContent.trim())}for(var cc=0,cCliLen=customClicks.length;cc<cCliLen;cc++){creative.customClicks.push(customClicks[cc].textContent.trim())}if(mediaFiles){var spielerMediaByType={};var spielerMedia={};spielerMedia.metadata={duration:creative.duration,id:creative.id,advertisement:true,title:title,adPosition:null};for(var m=0,medLen=mediaFiles.length;m<medLen;m++){var media={};var mediaFile=mediaFiles[m];media.bitrate=mediaFile.getAttribute("bitrate");media.width=mediaFile.getAttribute("width");media.height=mediaFile.getAttribute("height");media.type=mediaFile.getAttribute("type");media.delivery=mediaFile.getAttribute("delivery");media.url=mediaFile.textContent.trim();media.codec=mediaFile.getAttribute("codec");media.id=mediaFile.getAttribute("id");media.minBitrate=mediaFile.getAttribute("minBitrate");media.maxBitrate=mediaFile.getAttribute("maxBitrate");media.scalable=mediaFile.getAttribute("scalable");media.maintainAspectRatio=mediaFile.getAttribute("maintainAspectRatio");media.apiFramework=mediaFile.getAttribute("apiFramework");creative.media.push(media);var formatArray=spielerMediaByType[media.type]=spielerMediaByType[media.type]||[];formatArray.push(media.url)}for(var format in spielerMediaByType){spielerFormat=types[format];if(!spielerFormat){console.warn("Spieler VASTClient: Skipping stream, unknown MIME-type: "+format);continue}spielerMedia[spielerFormat]=spielerMediaByType[format]}creative.spielerMedia=spielerMedia}else{creative.spielerMedia=null}if(creative.spielerMedia){creative.tracker=new VASTTracker(creative.trackings,creative.clickTrackings,impressions)}return creative};var parseCompanion=function(source,parsed){var creative={};var trackings=parsed.getElementsByTagName("Tracking");var clickTrackings=parsed.getElementsByTagName("clickTracking");var sources=["StaticResource","IFrameResource","HTMLResource"];var resources=[];creative.trackings={};creative.clickTrackings=[];creative.resources=[];creative.id=source.getAttribute("id");creative.sequence=source.getAttribute("sequence");creative.clickThroughURL=parsed.getElementsByTagName("CompanionClickThrough")[0].textContent.trim();creative.width=parsed.getAttribute("width");creative.height=parsed.getAttribute("height");creative.assetWidth=parsed.getAttribute("assetWidth");creative.assetHeight=parsed.getAttribute("assetHeight");creative.expandedWidth=parsed.getAttribute("expandedWidth");creative.expandedHeight=parsed.getAttribute("expandedHeight");for(var t=0,traLen=trackings.length;t<traLen;t++){var key=trackings[t].getAttribute("event");if(!creative.trackings[key]){creative.trackings[key]=[]}creative.trackings[key].push(trackings[t].textContent.trim())}for(var ct=0,ctraLen=clickTrackings.length;ct<ctraLen;ct++){creative.clickTrackings.push(clickTrackings[ct].textContent.trim())}for(var s=0,souLen=sources.length;s<souLen;s++){resources=parsed.getElementsByTagName(sources[s]);if(resources.length>0){for(var r=0,resLen=resources.length;r<resLen;r++){var resource={};switch(sources[s]){case"StaticResource":resource.type="static";break;case"IFrameResource":resource.type="iframe";break;case"HTMLResource":resource.type="html";break;default:resource.type="unknown"}resource.url=resources[r].textContent.trim();resource.creativeType=resources[r].getAttribute("creativeType");creative.resources.push(resource)}}}return creative};getResource(function(error,ads){if(error){return callback(error)}var counter=0;ads.forEach(function(ad,index){if(!ad.complete){counter++;console.log("Spieler VASTClient: requesting additional VAST tag for #"+ad.id);var client=Spieler.plugins.vastClient(ad.vastTag,function(error,otherAds){var otherAd=otherAds?otherAds[0]:null;counter--;if(otherAd){deepExtend(ad,otherAd);ad.creatives.linear.forEach(function(creative){creative.tracker=new VASTTracker(creative.trackings,creative.clickTrackings,ad.impressions)})}else{console.error("Spieler VASTClient: Failed to follow Wrapper for ad #"+ad.id,error)}if(counter===0){callback(null,ads)}})}});if(!counter){callback(null,ads)}})};function FlashScreen(element,spieler,media){"use strict";var flashElement;var self=this;var swfPath=Spieler.path+"swf/";var swfFileName="spieler.swf";if(media.platform()&Media.PLATFORM.FLASHHDCORE){swfFileName="spieler.hdcore.swf"}else if(media.platform()&Media.PLATFORM.FLASHHLS){swfFileName="spieler.hls.swf"}var swfUrl=swfPath+swfFileName;var _lastPassiveState=spieler.getPassiveState();var _destroyed=false;this.isDestroyed=function(){return _destroyed};this.currentTime=function(value){return flashElement?flashElement.currentTime(value):0};this.volume=function(value){return flashElement?flashElement.volume(value):0};this.muted=function(value){return flashElement?flashElement.muted(value):0};this.duration=function(){return flashElement?flashElement.getDuration():0};this.abs=function(value){return flashElement?flashElement.abs(value):false};this.quality=function(value){return flashElement?flashElement.getQuality(value):0};this.qualities=function(){return flashElement?flashElement.qualities():0};this.qualityList=function(){return flashElement?flashElement.qualityList():[]};this.destroy=function(){_destroyed=true;spieler.dispatcher.remove(Spieler.events.PLAY,onSpielerPlay);spieler.dispatcher.remove(Spieler.events.PAUSE,onSpielerPause);spieler.dispatcher.remove(Spieler.events.END,onSpielerEnd);spieler.dispatcher.remove(Spieler.events.DURATIONCHANGE,seekToStart);spieler.dispatcher.remove(Spieler.events.TIMEUPDATE,onTimeupdate);if(flashDiv!==null){if(flashDiv.parentNode){utils.deleteFlash(flashDiv)}flashDiv=null}flashElement=null;if(element&&element.parentNode){dom.removeClass(element.parentNode,"backgroundHack")}spieler.dispatcher.dispatch(Spieler.events.SCREENDESTROY)};function onSpielerPlay(event,data){if(!_lastPassiveState||!data||!data.feedback){flashElement.playVideo()}}function onSpielerPause(event,data){if(!_lastPassiveState||!data||!data.feedback){flashElement.pauseVideo()}}this.resume=function(){if(!_lastPassiveState)flashElement.playVideo()};function onSpielerEnd(event,data){if(!_lastPassiveState||!data||!data.feedback){self.destroy()}}function delayedLoad(){console.log("FlashScreen.delayedLoad()");scheduleSeek();if(!media||!media.active())return;flashElement.load(media.active(),spieler.volume(),spieler.muted());if(!spieler.playing()){onSpielerPause()}spieler.dispatcher.add(Spieler.events.PLAY,onSpielerPlay);spieler.dispatcher.add(Spieler.events.PAUSE,onSpielerPause);spieler.dispatcher.add(Spieler.events.END,onSpielerEnd);spieler.dispatcher.add(Spieler.events.TIMEUPDATE,onTimeupdate)}var seekScheduled=false;function scheduleSeek(){if(seekScheduled||!flashElement){return}if(media&&media.metadata&&media.metadata.clip){spieler.dispatcher.addOnce(Spieler.events.DURATIONCHANGE,seekToStart);seekScheduled=true}}function seekToStart(){if(flashElement){flashElement.currentTime(media.metadata.clip.start)}seekScheduled=false}function onTimeupdate(){if(flashElement&&media.metadata.clip){if(flashElement.currentTime(null)>=media.metadata.clip.stop){spieler.pause();spieler.dispatcher.remove(Spieler.events.TIMEUPDATE,onTimeupdate);self.destroy();spieler.dispatcher.dispatch(Spieler.events.END)}}}spieler.dispatcher.addOnce(FlashScreen.events.REGISTER,function(eventName,buildNumber){flashElement=document.getElementById(spieler.upid());Spieler.flash.buildNumber=buildNumber;setTimeout(delayedLoad,10)});spieler.dispatcher.addOnce(Spieler.events.MEDIACHANGE,function(){self.destroy()});spieler.dispatcher.add(Spieler.events.PASSIVESTATECHANGED,function(eventName,newState){_lastPassiveState=newState});var params={bgcolor:"#000000",wmode:"opaque",allowfullscreen:true,allowscriptaccess:"always",flashvars:"upid="+spieler.upid()};var attrs={width:"100%",height:"100%",id:spieler.upid()};var flashDiv=document.createElement("div");flashDiv.setAttribute("style","width:100%;height:100%;background-color:#000");flashDiv.appendChild(utils.embedFlash(swfUrl,params,attrs));element.appendChild(flashDiv);if(Spieler.browser.is.ie&&Spieler.browser.is.ie<=10){dom.addClass(element.parentNode,"backgroundHack")}}FlashScreen.events={REGISTER:"REGISTER",BITRATECHANGE:"BITRATECHANGE"};function TagScreen(element,spieler,media){"use strict";var sourceElement;var videoElement=element.querySelector("video");var self=this;var currentQuality;var currentTime=0;var errorMap={};errorMap[MediaError.MEDIA_ERR_ABORTED]="VIDEO_ERROR_ABORTED";errorMap[MediaError.MEDIA_ERR_NETWORK]="VIDEO_ERROR_NETWORK";errorMap[MediaError.MEDIA_ERR_DECODE]="VIDEO_ERROR_DECODE";errorMap[MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]="VIDEO_ERROR_SRC_NOT_SUPPORTED";var isOldIphone=Spieler.browser.is.iPhone&&Spieler.browser.is.iOS!==false&&Spieler.browser.is.iOS===7;var getsizeSent=false;var endSent=false;var waitingForReload=false;var seekScheduled=false;var lastPassiveState=spieler.getPassiveState();var destroyed=false;var ended=false;function setVideoSource(videoElement,media,done){var source=media.active().url;videoElement.src=source;if(typeof done==="function"){done()}}function onTimeupdate(){if(lastPassiveState||utils.isEmptyVideo(this)){return}if(isOldIphone&&!ended&&videoElement.currentTime===0){return}currentTime=videoElement.currentTime;if(spieler.playState()==="paused"&&!videoElement.paused){console.error("TagScreen: playState is out of sync!")}if(spieler.playState()==="playing"){spieler.dispatcher.dispatch(Spieler.events.TIMEUPDATE,currentTime)}if(videoElement.duration>3&&currentTime>videoElement.duration-3||currentTime>videoElement.duration*.8){spieler.dispatcher.dispatch(Spieler.events.ALMOSTENDED,currentTime)}if(media.metadata.clip){if(currentTime>=media.metadata.clip.stop){spieler.pause();onEnded()}}}function onDurationchange(e){if(waitingForReload){return false}if(!lastPassiveState&&!utils.isEmptyVideo(e.target)){spieler.dispatcher.dispatch(Spieler.events.DURATIONCHANGE,videoElement.duration)}}function onError(e){if(!lastPassiveState&&!utils.isEmptyVideo(e.target)){if(e.target.error){var error=errorMap[e.target.error.code]||"VIDEO_ERROR_UNKNOWN";spieler.dispatcher.dispatch(Spieler.events.ERROR,error)}else{console.warn("TagScreen: an unspecified error occured on the video element")}}}function onLoadedmeta(){if(lastPassiveState||utils.isEmptyVideo(this)){return}if(waitingForReload){waitingForReload=false;return}if(videoElement.videoWidth&&videoElement.videoHeight){spieler.dispatcher.dispatch(Spieler.events.GETSIZE,{width:videoElement.videoWidth,height:videoElement.videoHeight});getsizeSent=true}}function onPlaying(){endSent=false;if(lastPassiveState||utils.isEmptyVideo(this)){return}if(!getsizeSent){spieler.dispatcher.dispatch(Spieler.events.GETSIZE,{width:videoElement.videoWidth,height:videoElement.videoHeight});getsizeSent=true}spieler.dispatcher.dispatch(Spieler.events.PLAYING)}function onPausing(){if(lastPassiveState){return}spieler.dispatcher.dispatch(Spieler.events.PAUSED)}function onContextMenu(evt){evt.stopImmediatePropagation();evt.preventDefault()}function onEnded(){if(lastPassiveState||utils.isEmptyVideo(videoElement)){return}if(!endSent){spieler.dispatcher.dispatch(Spieler.events.END);endSent=true;utils.resetVideoElement(videoElement)}}function scheduleSeek(){if(seekScheduled||!videoElement){return}if(media&&media.metadata&&media.metadata.clip){console.log("scheduleSeek");spieler.dispatcher.addOnce(Spieler.events.DURATIONCHANGE,seekToStart);seekScheduled=true}}function seekToStart(){console.log("seekToStart",media.metadata.clip.start);videoElement.currentTime=media.metadata.clip.start;seekScheduled=false}function onVolumeChange(e){if(lastPassiveState||utils.isEmptyVideo(videoElement)){return}spieler.volume(videoElement.volume);spieler.muted(videoElement.muted)}function onSpielerPLAY(event,data){if(!lastPassiveState||!data||!data.feedback){videoElement.play()}}function onSpielerPAUSE(event,data){if(!lastPassiveState||!data||!data.feedback){videoElement.pause()}}function onSpielerMEDIACHANGE(){utils.resetVideoElement(videoElement)}function onSpielerPASSIVESTATECHANGED(eventName,newState){if(lastPassiveState!==newState){lastPassiveState=newState}}function onSpielerPOSTCLIPDONE(){waitingForReload=true}function onSpielerDURATIONCHANGE(){ended=false}function onSpielerEND(){ended=true}this.enableNativeControls=function(){videoElement.controls=true;nativeControls=true;nativeCallbacks(true)};this.isDestroyed=function(){return destroyed};this.currentTime=function(value){if(value!==undefined){videoElement.currentTime=value}return currentTime};this.volume=function(value){if(value!==undefined){if(value<0){value=0}else if(value>1){value=1}videoElement.volume=value}return videoElement.volume};this.muted=function(value){if(value!==undefined){videoElement.muted=value}return videoElement.muted};this.buffered=function(){return videoElement.buffered.length?videoElement.buffered.end(0):0};this.duration=function(){return videoElement.duration};this.abs=function(value){return false};this.quality=function(value){return media.quality(value)};this.qualityList=function(){return media.qualityList()};this.qualities=function(){return media.qualities()};this.destroy=function(){destroyed=true;spieler.dispatcher.remove(Spieler.events.PLAY,onSpielerPLAY);spieler.dispatcher.remove(Spieler.events.PAUSE,onSpielerPAUSE);spieler.dispatcher.remove(Spieler.events.MEDIACHANGE,onSpielerMEDIACHANGE);spieler.dispatcher.remove(Spieler.events.PASSIVESTATECHANGED,onSpielerPASSIVESTATECHANGED);spieler.dispatcher.remove(Spieler.events.POSTCLIPDONE,onSpielerPOSTCLIPDONE);if(isOldIphone){spieler.dispatcher.remove(Spieler.events.DURATIONCHANGE,onSpielerDURATIONCHANGE);spieler.dispatcher.remove(Spieler.events.END,onSpielerEND)}var events={timeupdate:[onTimeupdate],durationchange:[onDurationchange,seekToStart],error:[onError],loadedmetadata:[onLoadedmeta],playing:[onPlaying],pause:[onPausing],ended:[onEnded],volumechange:[onVolumeChange],contextmenu:[onContextMenu]};Object.keys(events).forEach(function(name){events[name].forEach(function(handler){dom.off(videoElement,name,handler);dom.off(videoElement,name,handler,true)})});videoElement.pause()};this.changeSource=function(newMedia){if(newMedia){media=newMedia;setVideoSource(videoElement,media,function(){scheduleSeek();if(spieler.playing()){videoElement.play()}getsizeSent=false;endSent=false})}else{utils.resetVideoElement(videoElement)}if(sourceElement){videoElement.removeChild(sourceElement);sourceElement=null}};this.resume=function(){if(!lastPassiveState){videoElement.play()}};if(media){this.changeSource(media)}else{utils.resetVideoElement(videoElement)}videoElement.autoplay=spieler.playing();videoElement.volume=spieler.volume();videoElement.muted=spieler.muted();dom.on(videoElement,"timeupdate",onTimeupdate);dom.on(videoElement,"durationchange",onDurationchange);dom.on(videoElement,"error",onError,true);dom.on(videoElement,"loadedmetadata",onLoadedmeta);dom.on(videoElement,"playing",onPlaying);dom.on(videoElement,"pause",onPausing);dom.on(videoElement,"volumechange",onVolumeChange);dom.on(videoElement,"contextmenu",onContextMenu);dom.on(videoElement,"ended",onEnded);spieler.dispatcher.add(Spieler.events.PLAY,onSpielerPLAY);spieler.dispatcher.add(Spieler.events.PAUSE,onSpielerPAUSE);spieler.dispatcher.add(Spieler.events.MEDIACHANGE,onSpielerMEDIACHANGE);spieler.dispatcher.add(Spieler.events.PASSIVESTATECHANGED,onSpielerPASSIVESTATECHANGED);spieler.dispatcher.add(Spieler.events.POSTCLIPDONE,onSpielerPOSTCLIPDONE);if(isOldIphone){spieler.dispatcher.add(Spieler.events.DURATIONCHANGE,onSpielerDURATIONCHANGE);spieler.dispatcher.add(Spieler.events.END,onSpielerEND)}}function Browser(){"use strict";function isInUserAgent(txt){return navigator.userAgent.indexOf(txt)!==-1}function getIEVersion(){if(isInUserAgent("MSIE")){return+navigator.userAgent.match(/MSIE (\d+)/)[1]}else if(isInUserAgent("Trident/")){return+navigator.userAgent.match(/rv:(\d+)/)[1]}else{return false}}function getIOSVersion(){if(isInUserAgent("iPhone")||isInUserAgent("iPad")){var raw=navigator.userAgent.match(/OS (\d+)_/);if(raw!==null&&raw.length>=2){return+raw[1]}}return false}this.is={firefox:isInUserAgent("Firefox"),chrome:isInUserAgent("Chrome")&&!isInUserAgent("Edge/")&&!isInUserAgent("OPR")&&!isInUserAgent("Opera"),opera:isInUserAgent("Opera")||isInUserAgent("OPR"),iosWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)||isInUserAgent("CriOS"),android:isInUserAgent("Android"),ie:getIEVersion(),edge:isInUserAgent("Edge/"),iPad:isInUserAgent("iPad"),iPhone:isInUserAgent("iPhone"),iOS:getIOSVersion(),OSX:isInUserAgent("Macintosh"),desktopSafari:isInUserAgent("Macintosh")&&isInUserAgent("Safari")&&!isInUserAgent("Chrome"),smartphone:isInUserAgent("Android")||isInUserAgent("iPad")||isInUserAgent("iPhone")||isInUserAgent("Windows Phone")||isInUserAgent("Mobile"),safari:false,desktop:!(isInUserAgent("Android")||isInUserAgent("iPad")||isInUserAgent("iPhone")||isInUserAgent("Windows Phone")||isInUserAgent("Mobile"))};if(!(this.is.firefox||this.is.chrome||this.is.opera)&&isInUserAgent("Safari")){this.is.safari=true}else if(this.is.android){var version=navigator.userAgent.match(/Android\s([0-9\.]*)/);if(!version&&this.is.firefox){version="2.3"}else if(version){version=version[1]}if(version&&version.length>=2){this.is.android=version.split(".");for(var i=0;i<this.is.android.length;i++){this.is.android[i]=+this.is.android[i]}if(this.is.android.length<3){this.is.android[2]=0}}}else if(this.is.chrome&&this.is.ie){this.is.chrome=false}this.sizeClass={toString:function(){return this.value}};(function updateSize(){var sizeBreakpoints={
xs:0,sm:768,md:992,lg:1200};var key;var last;var size=window.screen.width;if(this.is.smartphone&&window.screen.width>window.screen.height){size=window.screen.height}for(key in sizeBreakpoints){if(size>=sizeBreakpoints[key]){if(last){this.sizeClass[last]=false}this.sizeClass[key]=true;this.sizeClass.value=key;last=key}else{this.sizeClass[key]=false}}this.sizeClass.phone=this.sizeClass.xs;this.sizeClass.tablet=this.sizeClass.sm;this.sizeClass.desktop=this.sizeClass.md||this.sizeClass.lg}).apply(this);this.supports={fullScreen:document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitRequestFullScreen,localStorage:function(w){try{return"localStorage"in w&&typeof w.localStorage==="object"&&"setItem"in w.localStorage}catch(e){return false}}(window),html5:{video:!!document.createElement("video").canPlayType},css3:{transitions:function(){var keys=[];for(var key in document.createElement("div").style){if(/transition/i.test(key)){keys.push(key)}}return keys.length>0}()}};var cached={};this.has={};cached.has={};this.has.flash=function(){if(cached.has.flash===null){cached.has.flash=false;try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){cached.has.flash=true}}catch(e){var mime="application/x-shockwave-flash";var mimes=navigator.mimeTypes;if(mimes&&mimes[mime]&&mimes[mime].enabledPlugin){cached.has.flash=true}}}return cached.has.flash};cached.has.flash=null;this.fs={};if(typeof HTMLElement==="undefined"){HTMLElement={prototype:{}}}else if(typeof HTMLElement.prototype==="undefined"){HTMLElement.prototype={}}if(typeof HTMLVideoElement==="undefined"){HTMLVideoElement={prototype:{}}}else if(typeof HTMLVideoElement.prototype==="undefined"){HTMLVideoElement.prototype={}}var p;if(window.HTMLDocument!==undefined){p=HTMLDocument.prototype}else{p=Document.prototype}this.fs.changeEvent="onmozfullscreenchange"in p?"mozfullscreenchange":"onwebkitfullscreenchange"in p?"webkitfullscreenchange":"onmsfullscreenchange"in p?"MSFullscreenChange":"onfullscreenchange"in p?"fullscreenchange":null;this.fs.nativeChangeEvents=["webkitbeginfullscreen","webkitendfullscreen"];p=HTMLElement.prototype;this.fs.request="mozRequestFullScreen"in p?"mozRequestFullScreen":"webkitRequestFullscreen"in p?"webkitRequestFullscreen":"msRequestFullscreen"in p?"msRequestFullscreen":"requestFullscreen"in p?"requestFullscreen":"webkitEnterFullscreen"in HTMLVideoElement.prototype?"webkitEnterFullscreen":null;if(window.HTMLDocument!==undefined){p=HTMLDocument.prototype}else{p=Document.prototype}this.fs.exit="mozCancelFullScreen"in p?"mozCancelFullScreen":"webkitExitFullscreen"in p?"webkitExitFullscreen":"msExitFullscreen"in p?"msExitFullscreen":"exitFullscreen"in p?"exitFullscreen":null;this.fs.exitNative="webkitExitFullscreen"in HTMLVideoElement.prototype?"webkitExitFullscreen":null;this.fs.html5=!!this.fs.exit;this.fs.native=this.fs.html5||!!this.fs.exitNative;if((this.is.ie===false||this.is.ie>8)&&typeof Object.defineProperty!=="undefined"){Object.defineProperty(this,"fullscreenElement",{get:function(){return this.fs.fullscreenElement}});Object.defineProperty(this.fs,"fullscreenElement",{get:function getFullscreenElement(){var keys=["fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement"];var fullscreenKey=keys.find(function(key){return document[key]!==undefined});return fullscreenKey===undefined?undefined:document[fullscreenKey]}})}this.fs.isFullscreenElement=function(element){if(element){return this.fullscreenElement!==undefined?this.fullscreenElement===element:element.webkitDisplayingFullscreen}};this.isFullscreenElement=this.fs.isFullscreenElement.bind(this.fs)}function Dispatcher(){"use strict";var element=document.createElement("div");var wrappers={};var onceWrappers={};var _add=element.addEventListener.bind(element);var _remove=element.removeEventListener.bind(element);var _dispatch=element.dispatchEvent.bind(element);function getWrapper(handlerFunc){return function(evtObj){handlerFunc(evtObj.type,evtObj.data)}}function registerHandler(eventName,handlerFunc,wrapperFunc,isOnce){var dictionary=isOnce===true?onceWrappers:wrappers;if(dictionary[eventName]===undefined){dictionary[eventName]=[]}var found=false;var i=0,len=dictionary[eventName].length;for(i;i<len;i++){if(dictionary[eventName][i].original===handlerFunc){found=true;break}}if(found===false){dictionary[eventName].push({wrapper:wrapperFunc,original:handlerFunc});return true}return false}function deleteHandler(eventName,handlerFunc,isOnce){var dict=isOnce===true?onceWrappers:wrappers;if(dict[eventName]!==undefined){var len=dict[eventName].length;var i=0,found=false;for(i;i<len;i++){if(dict[eventName][i].original===handlerFunc){dict[eventName].splice(i,1);found=true;break}}}return found}this.add=function(eventName,handlerFunc,addOnce){if(eventName===undefined||handlerFunc===undefined){throw new Error("Dispatcher: Missing parameter")}if(typeof handlerFunc!=="function"){throw new Error("Dispatcher: handlerFunc is not an executable function")}function onceWrapperFunc(evtObj){if(deleteHandler(eventName,handlerFunc,true)){_remove(eventName,onceWrapperFunc)}handlerFunc(evtObj.type,evtObj.data)}if(addOnce===true){if(registerHandler(eventName,handlerFunc,onceWrapperFunc,true)){_add(eventName,onceWrapperFunc)}return}var wrapperFunc=getWrapper(handlerFunc);if(registerHandler(eventName,handlerFunc,wrapperFunc,false)){_add(eventName,wrapperFunc)}};function findWrapperByHandler(dictionary,eventName,handlerFunc){if(!Array.isArray(dictionary[eventName])){return undefined}var record=dictionary[eventName].find(function(record){return record.original===handlerFunc});return record?record.wrapper:undefined}this.remove=function(eventName,handlerFunc){var wrapperFunc=findWrapperByHandler(wrappers,eventName,handlerFunc);if(wrapperFunc){deleteHandler(eventName,handlerFunc,false);_remove(eventName,wrapperFunc)}else{console.warn("Dispatcher: given handler is not registered for "+eventName+", so couldn't be removed")}};this.dispatch=function(eventName,data){var evt=document.createEvent("Event");evt.initEvent(eventName,false,false);evt.data=data;_dispatch(evt)};function clearEvents(dictionary){var key,i,len,arr;for(key in dictionary){if(dictionary[key].length!==undefined){arr=dictionary[key];len=arr.length;i=0;for(i;i<len;i++){_remove(key,arr[i].wrapper)}dictionary[key]=null;delete dictionary[key]}}}this.destroy=function(){clearEvents(wrappers);clearEvents(onceWrappers)};this.addOnce=function(eventName,handlerFunc){this.add(eventName,handlerFunc,true)}}function HookManager(){"use strict";this._hooks={};this._stack=[]}(function(){"use strict";HookManager.prototype={add:function(hook,func,name,prepend){var handler;if(this._stack.indexOf(hook)!==-1){throw new Error("refusing to add a function to a currently running hook")}if(this._hooks[hook]===undefined){this._hooks[hook]=[]}handler={func:func,name:name};if(prepend)this._hooks[hook].unshift(handler);else this._hooks[hook].push(handler);console.log("Spieler HookManager: added "+hook+"/"+name);return this},remove:function(hook,func,name){if(typeof func==="string"){name=func;func=null}var hookArray=this._hooks[hook];var removed;if(!hookArray){console.warn("Spieler HookManager: could not find hook "+hook);return}for(var i=0;i<hookArray.length;i++){if(hookArray[i]===null)continue;if(func&&hookArray[i].func===func||name&&hookArray[i].name===name){hookArray[i]=null;removed=true;break}}if(removed){console.log("Spieler HookManager: removed "+hook+"/"+name)}else{console.warn("Spieler Hookmanager: could not remove "+hook+"/"+name)}return this},exec:function(hook,data,callback){console.log("Spieler HookManager: executing hook "+hook);var hookArray=this._hooks[hook];if(!callback){callback=function(){}}if(!hookArray||!hookArray.length){callback(null);return this}var hookIndex=-1;var lastName;var self=this;this._stack.push(hook);function callNext(error,result){hookIndex++;if(error){console.error("Spieler HookManager: function failed "+hook+"/"+lastName);callback(error);return}else if(hookIndex>=hookArray.length){for(var i=0;i<hookArray.length;i++){if(!hookArray[i]){hookArray.splice(i,1)}}self._stack.pop();console.log("Spieler HookManager: hook finished: "+hook);callback(null,result)}else{if(!hookArray[hookIndex]){callNext(null,result);return}lastName=hookArray[hookIndex].name;console.log("Spieler HookManager: executing function "+hook+"/"+lastName);try{hookArray[hookIndex].func(result,callNext)}catch(caughtError){console.error("Spieler HookManager: function failed "+hook+"/"+lastName);callback(caughtError);return}}}callNext(null,data);return this},isEnabled:function(hookName){return this._hooks[hookName]!==undefined&&this._hooks[hookName].length>0}}})();function Logger(beName,config){"use strict";function toLogObject(type,args){return{type:type,arguments:args,occured:(new Date).toISOString()}}function createWrapper(wrapper){return function(){if(config[wrapper]&&backend.handler){var args=utils.cloneArray(arguments);args.unshift(wrapper);return backend.handler.apply(this,args)}}}var beName=beName||"console",config=utils.extend({log:true,warn:true,info:true,error:true},typeof config==="object"?config:{}),backend;var localStorageController=function(){var localStorageCache=[];var LStore=new function(){var KEY="spieler-log";function init(){window.localStorage[KEY]=window.localStorage[KEY]||"[]"}this.fetch=function(){init();return JSON.parse(window.localStorage[KEY])};this.update=function(data){init();window.localStorage[KEY]=JSON.stringify(data)}};return{init:function(){if(!Spieler.browser.supports.localStorage){throw new Error("LocalStorage is not supported")}localStorageCache=LStore.fetch()},handler:function(){var args=utils.cloneArray(arguments);var type=args.splice(0,1)[0];switch(type){case"log":case"warn":case"error":case"info":localStorageCache.push(toLogObject(type,args));LStore.update(localStorageCache);break}},extra:{dump:function(){return utils.cloneArray(localStorageCache)},reset:function(){localStorageCache.length=0;LStore.update(localStorageCache)}}}}();var logEntriesController={init:function(){if(!("LE"in window&&typeof window.LE==="object"&&"log"in window.LE)){throw new Error("Logentries library not found")}},handler:function(){var args=utils.cloneArray(arguments);var type=args.splice(0,1)[0];switch(type){case"log":case"warn":case"error":case"info":window.LE[type].apply(window.console,args);break}}};var backends={console:{handler:function(type){var args=utils.cloneArray(arguments);args.splice(0,1);switch(type){case"log":case"warn":case"error":case"info":var c=window.console;c[type].apply(c,args);break}}},nothing:{},localStorage:localStorageController,logEntries:logEntriesController};this.getBackendName=function(){return beName};this.getConfig=function(){return utils.cloneObject(config)};this.changeBackend=function(backendName){if(backendName&&backendName in backends){if(backend&&typeof backend.close==="function"){backend.close()}backend=backends[backendName];beName=backendName;if(typeof backend.init==="function"){backend.init()}this.extra=backend.extra||{}}else{throw new Error("Invalid Logger backend: "+backendName)}};this.changeBackendWithUndo=function(){var a=arguments;var b="boolean";var undo=typeof a[a.length-1]===b?[].pop.apply(a):false;var prev=Spieler.console.getBackendName();var failed=false;var error;for(var i=0;i<arguments.length;i++){try{Spieler.console.changeBackend(arguments[i]);failed=false;break}catch(e){error=e;failed=true}}if(failed){if(undo){window.console.warn(error.name+": "+error.message+" - reverting to previous backend ("+prev+")");Spieler.console.changeBackend(prev)}else{throw error}}};this.changeConfig=function(newConfig){if(typeof newConfig==="object"){config=utils.extend(config,newConfig)}};this.extra={};this.log=createWrapper("log");this.info=createWrapper("info");this.warn=createWrapper("warn");this.error=createWrapper("error");this.changeBackend(beName)}function Media(denyFlash,dispatcher){"use strict";var list=[];var original;var activeSource=-1;var activeQuality=0;var hasFlash=denyFlash?0:Spieler.browser.has.flash();var androidHLSSupportsVOD;var androidHLSSupportsLive;var androidVersion;var versionToInt=function(version){if(typeof version==="string"){version=version.split(".").map(function(e){return parseInt(e,10)})}return(version[0]<<16)+(version[1]<<8)+version[2]};if(Spieler.browser.is.android&&Spieler.browser.is.android.length===3){androidVersion=versionToInt(Spieler.browser.is.android);if(androidVersion>=versionToInt("4.4.4")){androidHLSSupportsVOD=androidHLSSupportsLive=true}else if(androidVersion<versionToInt("4.4.4")&&androidVersion>=versionToInt("4.1.0")){androidHLSSupportsLive=true;androidHLSSupportsVOD=false}else{androidHLSSupportsLive=androidHLSSupportsVOD=false}console.log("SpielerMedia: Detected Android "+Spieler.browser.is.android.join(".")+", HLS Live Support: "+androidHLSSupportsLive+", HLS VOD Support: "+androidHLSSupportsVOD)}var FLASH=hasFlash?Media.PLATFORM.FLASH:0;var FLASHHDCORE=hasFlash?Media.PLATFORM.FLASHHDCORE:0;var FLASHHLS=hasFlash?Media.PLATFORM.FLASHHLS:0;var HTML5=Spieler.browser.supports.html5.video?Media.PLATFORM.HTML5:0;var HTML5HLS=0;if(Spieler.browser.is.iOS||Spieler.browser.is.desktopSafari||Spieler.browser.is.edge){HTML5HLS=Media.PLATFORM.HTML5}else if(Spieler.browser.is.android){if(this.metadata&&this.metadata.live){HTML5HLS=androidHLSSupportsLive?Media.PLATFORM.HTML5:0}else{HTML5HLS=androidHLSSupportsVOD?Media.PLATFORM.HTML5:0}}var formats=this.formats={m3u8:{platform:HTML5HLS|FLASHHLS,mimeType:"application/vnd.apple.mpegURL",overrideCanplaytype:true,abs:true,mbs:FLASHHLS},rtmp:{platform:FLASH,mbs:false,abs:false},flv:{platform:FLASH,mbs:false,abs:false},akamaihd:{platform:FLASHHDCORE,abs:true},smil:{platform:FLASHHDCORE,abs:true},mp4:{platform:HTML5||FLASH,mbs:true},webm:{platform:HTML5,abs:false,mbs:false},f4m:{platform:FLASHHDCORE,abs:true,mbs:false},mp3:{platform:HTML5},wav:{platform:HTML5}};function getFormatFromUrl(url){var regex=new RegExp("(?:^|\\.)("+Object.keys(formats).join("|")+")(?:\\?|#|$|:)","i");var matches=url.match(regex);return matches!==null?matches[1]:null}this.load=function(res){if(res instanceof Media){res=res.getOriginalResource()}this.metadata=res.metadata||{};original=res;if(typeof res==="string"){res=[[res]]}else if(typeof res==="object"&&!res.length){var temp=[];if(res.url&&res.streamName){temp.push([res])}else{for(var f2 in res){if(formats[f2]){if(typeof res[f2]==="string"){temp.push([res[f2]])}else if(Array.isArray(res[f2])){temp.push(res[f2])}else{continue}temp[temp.length-1].format=f2}}}res=temp}var initialResourcesLength=res.length;for(var f=0;f<res.length;f++){for(var q=0;q<res[f].length;q++){if(typeof res[f]==="string"){res[f]=[res[f]]}if(typeof res[f][q]==="string"){res[f][q]={url:res[f][q]}}else if(Array.isArray(res[f][q])||typeof res[f][q]==="object"&&!res[f][q].url){res[f].splice(q--,1)}}if(!res[f].format&&res[f].length){res[f].format=getFormatFromUrl(res[f][0].url)}if(!formats[res[f].format]||!res[f].length){res.splice(f--,1)}}var videoElement;var audioElement;var format;for(var c=0;c<res.length;c++){format=res[c].format;if(FLASH&&formats[format].platform&FLASH){res[c].platform=FLASH;list.push(res[c])}else if(FLASH&&formats[format].platform&FLASHHDCORE){res[c].platform=FLASHHDCORE;list.push(res[c])}else if(FLASH&&formats[format].platform&FLASHHLS){res[c].platform=FLASHHLS;list.push(res[c])}else if(formats[format].platform&HTML5){if(!videoElement){videoElement=document.createElement("video")}if(!audioElement){audioElement=document.createElement("audio")}if(videoElement.canPlayType&&videoElement.canPlayType(formats[format].mimeType||"video/"+format)||formats[format].overrideCanplaytype){res[c].platform=HTML5;list.push(res[c])}else if(audioElement.canPlayType&&audioElement.canPlayType(formats[format].mimeType||"audio/"+format)||formats[format].overrideCanplaytype){res[c].platform=HTML5;list.push(res[c])}else{console.log("SpielerMedia: dropping unsupported format (canplaytype denied): "+res[c].format)}}else{console.log("SpielerMedia: dropping unsupported format: "+res[c].format)}}if(format=="mp3"||format=="wav"){this.metadata.audio=true}if(list.length){this.source(0)}else if(initialResourcesLength){this.source(-2)}};this.active=function(){if(list&&list[activeSource]&&list[activeSource][activeQuality]){return list[activeSource][activeQuality]}return""};this.platform=function(){return activeSource>-1&&list[activeSource]?list[activeSource].platform:0};this.isFlashBasedPlatform=function(){var value=null;switch(this.platform()){case Media.PLATFORM.FLASH:case Media.PLATFORM.FLASHHDCORE:case Media.PLATFORM.FLASHHLS:value=true;break;case Media.PLATFORM.HTML5:value=false;break}return value};this.format=function(){return activeSource>-1&&list[activeSource]?list[activeSource].format:""};this.metadata=null;this.destroy=function(){dispatcher.dispatch(Media.events.DESTROY)};this.source=function(source){if(source<list.length&&source!=activeSource){activeSource=source;dispatcher.dispatch(Media.events.PLATFORMCHANGE)}return activeSource};this.sources=list;this.getOriginalResource=function(){return original};this.quality=function(value){if(value!=activeQuality&&value>=0&&value<this.qualities()){activeQuality=value}return activeQuality};this.qualities=function(){if(list&&list[activeSource])return list[activeSource].length;else return-1};this.qualityList=function(){if(list&&list[activeSource])return list[activeSource];else return[]};this.absAvailable=function(){if(!formats[this.format()])return false;return formats[this.format()].abs?true:false};this.mbsAvailable=function(){return formats[this.format()].mbs?true:false}}Media.events={DESTROY:"MEDIA.DESTROY",PLATFORMCHANGE:"MEDIA.PLATFORMCHANGE"};Media.PLATFORM={HTML5:1,FLASH:2,FLASHHDCORE:4,FLASHHLS:8};var NativeControlsManager;(function(){"use strict";var fs;var P="Spieler NativeControlsManager: ";NativeControlsManager=function(videoElement,dispatcher){fs=Spieler.browser.fs;console.log(P+"initialising on element ",videoElement);this._video=videoElement;this._dispatcher=dispatcher;this._inFullscreen=fs.isFullscreenElement(videoElement);this._lastControlsState=null;this._lastPassiveState=false;this._pauseTimeout=null;utils.bindAll(this);this._dispatcher.add(Spieler.events.DESTROY,this._onDestroy);this._dispatcher.add(Spieler.events.DURATIONCHANGE,this._onDurationChange);this._dispatcher.add(Spieler.events.PASSIVESTATECHANGED,this._onPassiveStateChange)};NativeControlsManager.prototype={enable:function(noprop){console.log(P+"enabling native controls");this._lastControlsState=true;if(!noprop){this._video.controls=true}if(fs.isFullscreenElement(this._video)){this._inFullscreen=true}this._pauseTimeout&&clearTimeout(this._pauseTimeout);if(fs.html5){console.log(P+"listening to HTML5 fullcreenchange");dom.on(document,fs.changeEvent,this._onFullscreenchange)}else if(fs.native){console.log(P+"listening to native fullcreenchange");fs.nativeChangeEvents.forEach(function(ev){dom.on(this._video,ev,this._onFullscreenchange)}.bind(this))}dom.on(this._video,"play",this._onPlay);dom.on(this._video,"pause",this._onPause)},disable:function(){console.log(P+"disabling native controls");this._lastControlsState=false;this._video.controls=false;if(fs.html5){dom.on(document,Browser.fullscreenChange,this._onFullscreenchange)}else if(fs.native){fs.nativeChangeEvents.forEach(function(ev){dom.on(this._video,ev,this._onFullscreenchange)}.bind(this))}dom.off(this._video,"play",this._onPlay);if(Spieler.browser.is.iOS){console.log("waiting to remove 'pause' callback");this._pauseTimeout=setTimeout(function(){console.log("removing 'pause' callback");dom.off(this._video,"pause",this._onPause)}.bind(this),5e3)}else{dom.off(this._video,"pause",this._onPause)}},_onDestroy:function(){console.log(P+"goodbye, cruel world");this._dispatcher.remove(Spieler.events.DESTROY,this._onDestroy);this._dispatcher.remove(Spieler.events.DURATIONCHANGE,this._onDurationChange);this._dispatcher.remove(Spieler.events.PASSIVESTATECHANGED,this._onPassiveStateChange);this.disable()},_onFullscreenchange:function(){if(fs.isFullscreenElement(this._video)){console.log(P+"fullscreen change: enter");this._dispatcher.dispatch(Spieler.events.FULLSCREEN,{feedback:true});this._inFullscreen=true}else if(this._inFullscreen){console.log(P+"fullscreen change: leave");this._dispatcher.dispatch(Spieler.events.FULLSCREEN,{feedback:true});this._inFullscreen=false}},_onPassiveStateChange:function(eventName,newState){this._lastPassiveState=newState},_onPlay:function(){if(!this._lastPassiveState){this._dispatcher.dispatch(Spieler.events.PLAY,{feedback:true})}},_onPause:function(){if(!this._lastPassiveState){this._dispatcher.dispatch(Spieler.events.PAUSE,{feedback:true})}this._pauseTimeout&&clearTimeout(this._pauseTimeout)},_onDurationChange:function(){this._video.controls=this._lastControlsState}}})();var NativeFullscreenManager;var fs;(function(){"use strict";var P="Spieler NativeFullscreenManager: ";NativeFullscreenManager=function(videoElement,dispatcher,manageNativeControls){fs=Spieler.browser.fs;console.log(P+"initialising on element ",videoElement);this._video=videoElement;this._dispatcher=dispatcher;this._isOldIphone=Spieler.browser.is.iPhone&&Spieler.browser.is.iOS!==false&&Spieler.browser.is.iOS===7;this._shouldBePlaying=false;this._prevSpielerTime=0;this._spielerTime=0;if(manageNativeControls){this._ncm=new NativeControlsManager(videoElement,dispatcher)}utils.bindAll(this);this._onFullscreenchange();this._dispatcher.add(Spieler.events.DESTROY,this._onDestroy);if(this._isOldIphone){this._dispatcher.add(Spieler.events.PLAYING,this._onPlaying);this._dispatcher.add(Spieler.events.PAUSED,this._onPaused);this._dispatcher.add(Spieler.events.TIMEUPDATE,this._onSplTimeupdate);this._dispatcher.add(Spieler.events.END,this._onSplEnd)}this._listen()};NativeFullscreenManager.prototype={enter:function(){if(this._video.readyState>0){console.log(P+"entering native fullscreen",fs.request);this._video[fs.request]()}else{console.error(P+"videoElement is not ready to go fullscreen");this._dispatcher.dispatch(Spieler.events.FULLSCREENERROR)}},inFullscreen:function(){return fs.isFullscreenElement(this._video)},exit:function(){console.log(P+"exiting native fullscreen",fs.exit,fs.exitNative);if(fs.html5){document[fs.exit]()}else if(fs.native){this._video[fs.exitNative]()}},_onDestroy:function(){console.log(P+"goodbye, cruel world");if(fs.html5){dom.off(document,fs.changeEvent,this._onFullscreenchange)}else if(fs.native){fs.nativeChangeEvents.forEach(function(ev){dom.off(this._video,ev,this._onFullscreenchange)}.bind(this))}this._dispatcher.remove(Spieler.events.FULLSCREEN,this._onSplFullscreen);this._dispatcher.remove(Spieler.events.DESTROY,this._onDestroy);if(this._isOldIphone){this._dispatcher.remove(Spieler.events.PLAYING,this._onPlaying);this._dispatcher.remove(Spieler.events.PAUSED,this._onPaused);this._dispatcher.remove(Spieler.events.TIMEUPDATE,this._onSplTimeupdate);this._dispatcher.remove(Spieler.events.END,this._onSplEnd)}},_onPlaying:function(){this._shouldBePlaying=true},_onPaused:function(){this._shouldBePlaying=false},_listen:function(){console.log(P+"listening");if(fs.html5){dom.on(document,fs.changeEvent,this._onFullscreenchange)}else if(fs.native){fs.nativeChangeEvents.forEach(function(ev){dom.on(this._video,ev,this._onFullscreenchange)}.bind(this))}this._dispatcher.add(Spieler.events.FULLSCREEN,this._onSplFullscreen)},_onFullscreenchange:function(){console.log(P+"fullscreen change");if(this._ncm){if(this.inFullscreen()){console.log(P+"please enable native controls");this._ncm.enable(Spieler.browser.is.iOS)}else{console.log(P+"please disable native controls");setTimeout(this._ncm.disable.bind(this._ncm),1e3)}}},_onSplTimeupdate:function(eventName,data){this._prevSpielerTime=this._spielerTime;this._spielerTime=data},_onSplEnd:function(eventName,data){this._prevSpielerTime=0},_onSplFullscreen:function(event,data){if(data){if(data.feedback){if(this._isOldIphone){var self=this;if(this._prevSpielerTime>0){this._dispatcher.addOnce(Spieler.events.TIMEUPDATE,function(){self._video.currentTime=self._prevSpielerTime})}if(this._shouldBePlaying&&this.inFullscreen()){this._video.play()}}return}var method=null;switch(this.inFullscreen()){case true:if(data.toggle||data.exit){method="exit"}break;case false:if(data.toggle||data.enter){method="enter"}break}if(method!==null){this[method]();return}}throw new Error("illegal FULLSCREEN event")}}})();(function(){"use strict";angular.module("ngSpieler",[]).directive("spieler",function(){var currentResources=null;var isLiveRailEnabled=false;var isLiveRailVpaidEnabled=false;var isDfpEnabled=false;if(!window.Spieler){throw new Error("Spieler library is not loaded")}return{scope:{resources:"=?",basicUi:"=?",autoplay:"=?",denyFlash:"=?",poster:"=?",playing:"=?",noinit:"=?",volume:"=?",quality:"=?",qualities:"=?",absAvailable:"=?",abs:"=?",mbsAvailable:"=?",qualitylist:"=?",muted:"=?",currentTime:"=?",showPosterWhileBuffering:"=?",disablePosterAnimation:"=?",disablePosterClick:"=?",liverail:"=?",liverailPartnerId:"=?",liverailPublisherId:"=?",liverailVideoPositions:"=?",liverailTags:"=?",liverailAdmaps:"=?",liverailVpaidParameters:"=?",liverailVpaidVideoPositions:"=?",liverailVpaidDenyFlash:"=?",dfp:"=?",dfpPreroll:"=?",dfpSting:"=?",dfpPostroll:"=?",dfpMidroll:"=?",dfpParameters:"=?",onStreamurlNeeded:"=?",reinitOnResourceChange:"=?",googleTagManagerEvents:"=?",googleTagManagerDataLayerHandle:"=?",googleTagManagerTrackAds:"=?",nativeFullscreen:"=?",fullscreen:"=?",nativeControls:"=?",flashBlockDetectorTimeout:"=?",flashBlockDetector:"=?",adBlockDetector:"=?"},link:function(scope,$element,attrs){var watchguards={playing:false,currentTime:false,quality:false,volume:false,muted:false,fullscreen:false};function bindCallbacks(){Object.keys(Spieler.events).forEach(function(event){scope.spieler.dispatcher.add(Spieler.events[event],function(eventName,data){scope.$emit(eventName,data,$element,scope.spieler)})});if(isLiveRailEnabled===true){Object.keys(Spieler.plugins.liverail.events).forEach(function(event){scope.spieler.dispatcher.add(Spieler.plugins.liverail.events[event],function(eventName,data){console.log("ngSpieler: liverail event",eventName);scope.$emit(eventName,data,$element,scope.spieler)})})}if(isLiveRailVpaidEnabled===true){Object.keys(Spieler.plugins.liveRailVpaid.events).forEach(function(event){scope.spieler.dispatcher.add(Spieler.plugins.liveRailVpaid.events[event],function(eventName,data){console.log("ngSpieler: liveRailVpaid event",eventName);scope.$emit(eventName,data,$element,scope.spieler)})})}if(isDfpEnabled===true){Object.keys(Spieler.plugins.dfp.events).forEach(function(event){scope.spieler.dispatcher.add(Spieler.plugins.dfp.events[event],function(eventName,data){console.log("ngSpieler: DFP event",eventName);scope.$emit(eventName,data,$element,scope.spieler)})})}if(scope.adBlockDetector){Object.keys(Spieler.plugins.adBlockDetector.events).forEach(function(event){scope.spieler.dispatcher.add(Spieler.plugins.adBlockDetector.events[event],function(eventName,data){console.log("ngSpieler: adBlockDetector event",eventName);scope.$emit(eventName,data,$element,scope.spieler)})})}}function getConfig(){var configObj={basicUi:scope.basicUi,denyFlash:scope.denyFlash,poster:scope.poster,autoplay:false,showPosterWhileBuffering:scope.showPosterWhileBuffering,disablePosterClick:scope.disablePosterClick,disablePosterAnimation:scope.disablePosterAnimation,nativeControls:scope.nativeControls,plugins:{}};if(scope.hasOwnProperty("nativeFullscreen")){configObj.nativeFullscreen=scope.nativeFullscreen}var liverailconfig;var gtmconfig;var liveRailVpaidConfig;var dfpConfig;var fbdconfig;var abdconfig;if(liverailconfig=getLiveRailConfig()){configObj.plugins.liverail=liverailconfig}if(liveRailVpaidConfig=getLiveRailVpaidConfig()){configObj.plugins.liveRailVpaid=liveRailVpaidConfig}if(dfpConfig=getDfpConfig()){configObj.plugins.dfp=dfpConfig;configObj.plugins.liverail=configObj.plugins.liveRailVpaid=null}if(gtmconfig=getGoogleTagManagerConfig()){configObj.plugins.googleTagManager=gtmconfig}if(fbdconfig=getFlashblockdetectorConfig()){configObj.plugins.flashBlockDetector=fbdconfig}if(scope.adBlockDetector){configObj.plugins.adBlockDetector=true}return configObj}function getLiveRailConfig(){var liveRailConfig={};isLiveRailEnabled=false;var scopeLiverailProcessedValue=typeof scope.liverail==="boolean"?scope.liverail:true;if(scopeLiverailProcessedValue){if(scope.liverailVideoPositions){if(scope.liverailPartnerId||scope.liverailPublisherId){liveRailConfig={partnerId:scope.liverailPartnerId,publisherId:scope.liverailPublisherId,tags:scope.liverailTags,admaps:scope.liverailAdmaps}}liveRailConfig["videoPositions"]=scope.liverailVideoPositions;isLiveRailEnabled=true}else{}}if(isLiveRailEnabled){console.log("ngSpieler: liveRail enabled: ",liveRailConfig)}return liveRailConfig}function getLiveRailVpaidConfig(){var config=null;if(scope.liverailVpaidVideoPositions||scope.liverailVpaidParameters||scope.liverailVpaidDenyFlash){config={videoPositions:scope.liverailVpaidVideoPositions,parameters:scope.liverailVpaidParameters,denyFlash:scope.liverailVpaidDenyFlash};isLiveRailVpaidEnabled=true;console.log("ngSpieler: liveRailVpaid enabled: ",config)}return config}function getDfpConfig(){var config=null;if(!scope.dfp)return null;config={preroll:scope.dfpPreroll,sting:scope.dfpSting,midroll:scope.dfpMidroll,postroll:scope.dfpPostroll,parameters:scope.dfpParameters};isDfpEnabled=true;console.log("ngSpieler: DFP enabled: ",config);return config}function getFlashblockdetectorConfig(){var config=null;if(scope.flashBlockDetector!==false&&(scope.flashBlockDetector||scope.flashBlockDetectorTimeout)){config={timeout:scope.flashBlockDetectorTimeout};console.log("ngSpieler: flashBlockDetector enabled: ",config)}return config}function getGoogleTagManagerConfig(){var config={};if(scope.googleTagManagerEvents){config.events={};for(var i=0;i<scope.googleTagManagerEvents.length;i++){config.events[scope.googleTagManagerEvents[i]]=true}if(scope.googleTagManagerDataLayerHandle){config.dataLayerHandle=scope.googleTagManagerDataLayerHandle}config.trackAds=scope.googleTagManagerTrackAds;console.log("ngSpieler: googleTagManager enabled: ",config);return config}else{return null}}function safeApply(){var phase=scope.$root.$$phase;if(phase!=="$apply"&&phase!=="$digest"){scope.$apply()}}function createSpieler(force){if(scope.spieler&&!force){return}else{var conf=getConfig();scope.spieler=new Spieler($element[0],scope.resources,conf);if(scope.onStreamurlNeeded){scope.spieler.hooks.add("streamurl-needed",scope.onStreamurlNeeded,"ng-spieler-on-streamurl-needed")}$element[0]._spieler=scope.spieler;scope.spieler.volume(scope.volume);scope.spieler.muted(scope.muted);scope.spieler.quality(scope.quality);bindCallbacks();console.log("ngSpieler: Instantiated Spieler for element",$element,"with resource: ",scope.resources?scope.resources:"none","with config",conf);if(scope.resources){currentResources=scope.resources}createWatches()}}$element.on("$destroy",function(){if(scope.spieler!==undefined){scope.spieler.destroy();scope.spieler=undefined}});function createWatches(){scope.$watch("resources",function(value,oldValue){if(value===currentResources){console.log("ngSpieler: resource not changed",value);return}console.log("ngSpieler: resource changed",value);if(scope.reinitOnResourceChange){scope.spieler.destroy();createSpieler(true)}else{try{scope.spieler.play(value);currentResources=value}catch(error){console.error("ngSpieler: failed to load new resource: ",error,value)}}});scope.$watch("currentTime",function(){if(watchguards.currentTime){watchguards.currentTime=false;return}if(scope.currentTime!==null){console.log("ngSpieler: seeking to position");scope.spieler.currentTime(scope.currentTime)}});scope.$watch("playing",function(){if(watchguards.playing){watchguards.playing=false;return}console.log("ngSpieler: play state changed",scope.playing);
if(scope.playing&&!scope.spieler.playing()){scope.spieler.play()}else if(!scope.playing&&scope.spieler.playing()){scope.spieler.pause()}else{console.log("ngSpieler: ignored state change")}});scope.$watch("quality",function(){if(watchguards.quality){watchguards.quality=false;return}console.log("ngSpieler: quality value changed",scope.quality);scope.spieler.quality(scope.quality)});scope.$watch("volume",function(){if(watchguards.volume){watchguards.volume=false;return}console.log("ngSpieler: volume value changed");scope.spieler.volume(scope.volume)});scope.$watch("abs",function(){console.log("ngSpieler: abs value changed");scope.spieler.abs(scope.abs)});scope.$watch("muted",function(){if(watchguards.muted){watchguards.muted=false;return}console.log("ngSpieler: muted value changed");scope.spieler.muted(scope.muted)});scope.$watch("fullscreen",function(value,oldValue){if(watchguards.fullscreen){watchguards.fullscreen=false;return}if(value!==oldValue&&typeof value==="boolean"){console.log("ngSpieler: fullscreen changed: ",value,"was:",oldValue);scope.spieler.fullscreen(value)}else{console.log("ngSpieler: ignored fullscreen change:",value,"was:",oldValue)}});scope.spieler.dispatcher.add(Spieler.events.FULLSCREEN,function(event,data){if(data){if(!data.feedback){var newValue=null;if(data.enter){newValue=true}if(data.exit){newValue=false}if(data.toggle){newValue=!scope.fullscreen}if(newValue!==null&&newValue!==scope.fullscreen){watchguards.fullscreen=true;scope.fullscreen=newValue;safeApply()}}else if(scope.fullscreen!==Spieler.browser.fs.isFullscreenElement($element[0].querySelector(scope.nativeFullscreen?"video":".ppMain"))){watchguards.fullscreen=true;scope.fullscreen=Spieler.browser.fs.isFullscreenElement($element[0].querySelector(scope.nativeFullscreen?"video":".ppMain"));console.log("ngSpieler: updated fullscreen to",scope.fullscreen," (feedback)");scope.$apply()}}});scope.spieler.dispatcher.add(Spieler.events.FULLSCREENERROR,function(event,data){setTimeout(function(){watchguards.fullscreen=true;scope.fullscreen=false;scope.$apply()},100)});scope.spieler.dispatcher.add(Spieler.events.PLAY,function(event,data){if(!scope.playing){scope.playing=true;watchguards.playing=true;safeApply()}});scope.spieler.dispatcher.add(Spieler.events.GETSIZE,function(event,data){if(scope.spieler.playing()&&!scope.playing){scope.playing=true;watchguards.playing=true;scope.$apply()}else if(!scope.spieler.playing()&&scope.playing){scope.playing=false;watchguards.playing=true;scope.$apply()}});scope.spieler.dispatcher.add(Spieler.events.PAUSE,function(event,data){if(scope.playing){scope.playing=false;watchguards.playing=true;scope.$apply()}});scope.spieler.dispatcher.add(Spieler.events.END,function(event,data){if(scope.playing){scope.playing=false;watchguards.playing=true;scope.$apply()}});scope.spieler.dispatcher.add(Spieler.events.TIMEUPDATE,function(event,data){scope.currentTime=data;watchguards.currentTime=true;scope.$apply()});scope.spieler.dispatcher.add(Spieler.events.VOLUMECHANGE,function(event,data){if(data!==scope.volume){scope.volume=data;watchguards.volume=true;scope.$apply()}});scope.spieler.dispatcher.add(Spieler.events.MUTEDCHANGE,function(event,data){if(data!==scope.muted){scope.muted=data;watchguards.muted=true;scope.$apply()}});scope.spieler.dispatcher.add(Spieler.events.DURATIONCHANGE,function(event,data){scope.qualities=scope.spieler.qualities();scope.absAvailable=scope.spieler.absAvailable();scope.mbsAvailable=scope.spieler.mbsAvailable();scope.quality=scope.spieler.quality();scope.abs=scope.spieler.abs();scope.qualitylist=scope.spieler.qualityList()});scope.spieler.dispatcher.add(Spieler.events.QUALITY,function(event,data){scope.quality=scope.spieler.quality();scope.abs=scope.spieler.abs()})}if(!scope.noinit){console.log("ngSpieler: sync init");createSpieler()}else{scope.$watch("noinit",function(value){if(!value){console.log("ngSpieler: delayed init");createSpieler()}})}}}});var console=Spieler.console})();
//# sourceMappingURL=ng-spieler.js.map
var console = Spieler.console;})(window);d      WK&WK'<iXi%   E    :http://player.performgroup.com/spieler/releases/1.26.0/ng-spieler.js necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Via: 1.1 ISA01TMG
Expires: Mon, 02 Jan 2017 06:24:38 GMT
Date: Tue, 04 Oct 2016 06:24:38 GMT
Content-Type: application/javascript; charset=utf-8
Etag: "ed4641a6166285de66e56a469443699d"
Server: AmazonS3
Accept-Ranges: bytes
x-amz-id-2: EcWNX9C0BHqbD45XhBOag8OLFRKlqAm3LHH5bn9YwkA7LVDGvIH8uo8J/lZh2Nezhdxb9WB5Vps=
x-amz-request-id: 8E08DE02A80F4EEB
Last-Modified: Tue, 06 Sep 2016 12:55:35 GMT
Cache-Control: max-age=7776000
 original-response-headers Via: 1.1 ISA01TMG
Connection: Keep-Alive
Proxy-Connection: Keep-Alive
Transfer-Encoding: chunked
Expires: Mon, 02 Jan 2017 06:24:38 GMT
Date: Tue, 04 Oct 2016 06:24:38 GMT
Content-Type: application/javascript; charset=utf-8
Etag: "ed4641a6166285de66e56a469443699d"
Server: AmazonS3
Accept-Ranges: bytes
x-amz-id-2: EcWNX9C0BHqbD45XhBOag8OLFRKlqAm3LHH5bn9YwkA7LVDGvIH8uo8J/lZh2Nezhdxb9WB5Vps=
x-amz-request-id: 8E08DE02A80F4EEB
Last-Modified: Tue, 06 Sep 2016 12:55:35 GMT
Cache-Control: max-age=7776000
 uncompressed-len 0  k